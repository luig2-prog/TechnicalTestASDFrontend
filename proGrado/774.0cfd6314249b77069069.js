(self.webpackChunkpro_grado=self.webpackChunkpro_grado||[]).push([[774],{9457:function(W,H){var y;void 0!==(y=function(){"use strict";function q(d,s,r){var c=new XMLHttpRequest;c.open("GET",d),c.responseType="blob",c.onload=function(){Z(c.response,s,r)},c.onerror=function(){console.error("could not download file")},c.send()}function S(d){var s=new XMLHttpRequest;s.open("HEAD",d,!1);try{s.send()}catch{}return 200<=s.status&&299>=s.status}function x(d){try{d.dispatchEvent(new MouseEvent("click"))}catch{var s=document.createEvent("MouseEvents");s.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),d.dispatchEvent(s)}}var T="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,B=T.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),Z=T.saveAs||("object"!=typeof window||window!==T?function(){}:"download"in HTMLAnchorElement.prototype&&!B?function(d,s,r){var c=T.URL||T.webkitURL,f=document.createElement("a");f.download=s=s||d.name||"download",f.rel="noopener","string"==typeof d?(f.href=d,f.origin===location.origin?x(f):S(f.href)?q(d,s,r):x(f,f.target="_blank")):(f.href=c.createObjectURL(d),setTimeout(function(){c.revokeObjectURL(f.href)},4e4),setTimeout(function(){x(f)},0))}:"msSaveOrOpenBlob"in navigator?function(d,s,r){if(s=s||d.name||"download","string"!=typeof d)navigator.msSaveOrOpenBlob(function(d,s){return void 0===s?s={autoBom:!1}:"object"!=typeof s&&(console.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(d.type)?new Blob(["\ufeff",d],{type:d.type}):d}(d,r),s);else if(S(d))q(d,s,r);else{var c=document.createElement("a");c.href=d,c.target="_blank",setTimeout(function(){x(c)})}}:function(d,s,r,c){if((c=c||open("","_blank"))&&(c.document.title=c.document.body.innerText="downloading..."),"string"==typeof d)return q(d,s,r);var f="application/octet-stream"===d.type,X=/constructor/i.test(T.HTMLElement)||T.safari,t=/CriOS\/[\d]+/.test(navigator.userAgent);if((t||f&&X||B)&&"undefined"!=typeof FileReader){var v=new FileReader;v.onloadend=function(){var O=v.result;O=t?O:O.replace(/^data:[^;]*;/,"data:attachment/file;"),c?c.location.href=O:location=O,c=null},v.readAsDataURL(d)}else{var k=T.URL||T.webkitURL,U=k.createObjectURL(d);c?c.location=U:location.href=U,c=null,setTimeout(function(){k.revokeObjectURL(U)},4e4)}});T.saveAs=Z.saveAs=Z,W.exports=Z}.apply(H,[]))&&(W.exports=y)},8774:(W,H,u)=>{"use strict";u.r(H),u.d(H,{MuestraModule:()=>xe});var A=u(8583),y=u(6187),w=u(4655),q=u(9824);function S(i,o,e,a,n,l,m){try{var g=i[l](m),h=g.value}catch(G){return void e(G)}g.done?o(h):Promise.resolve(h).then(a,n)}var T=u(4762),B=u(9692),Z=u(2091),d=u(8259),s=u.n(d),r=u(3679),c=u(2238),f=u(4741),X=u(4205),t=u(7716),v=u(2340),k=u(1841);let U=(()=>{class i{constructor(e){this.http=e,this.urlBase=v.N.urlBase}listaMaestra(){return this.http.get(`${this.urlBase}`)}insert(e){return this.http.post(`${this.urlBase}`,e)}countRegisterByDate(e){return this.http.get(`${this.urlBase}/count-register-by-date/${e}`)}consultaByparameter(e){return this.http.post(`${this.urlBase}/filtrar`,e)}updateMuestra(e){return this.http.put(`${this.urlBase}`,e)}deleteMuestra(e){return this.http.delete(`${this.urlBase}/muestra/${e}`)}getAnalisisTerminadosBymuestra(e){return this.http.get(`${this.urlBase}/parametros-analisis/${e}`)}asociarAnalisisAMuestra(e){return this.http.put(`${this.urlBase}/muestra/analisis`,e)}getAnalisisAsociadosMuestra(e){return this.http.get(`${this.urlBase}/parametros-analisis-asociados/${e}`)}updateEstadoPentAprobar(e){return this.http.put(`${this.urlBase}/muestra/pendiente-aprobacion`,e)}estantesOcupados(e){return this.http.get(`${this.urlBase}/estantes-ocupados/${e}`)}generarReporteMuestra(e){return this.http.get(`${this.urlBase}/generar-reporte-muestra-pdf/${e}`)}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(k.eN))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var O=u(9258),I=u(3147),F=u(1228),N=u(1095),L=u(1436),Q=u(6627),_=u(8295),J=u(9983),b=u(3220),Y=u(7441),K=u(1554),V=u(2458);function ot(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"mat-option",27),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw().setEstantes(l.nmdato)}),t._uU(1),t.qZA()}if(2&i){const e=o.$implicit;t.Q6J("value",e.nmdato),t.xp6(1),t.hij(" ",e.dsdato," ")}}function it(i,o){if(1&i&&(t.TgZ(0,"mat-option",28),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.Q6J("value",e.valor),t.xp6(1),t.AsE(" ",e.valor," ",e.estado," ")}}function at(i,o){if(1&i&&(t.TgZ(0,"mat-option",28),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.Q6J("value",e.nmdato),t.xp6(1),t.hij(" ",e.dsdato," ")}}function nt(i,o){if(1&i&&(t.TgZ(0,"mat-option",28),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function rt(i,o){if(1&i&&(t.TgZ(0,"mat-option",28),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.Q6J("value",e.nmdato),t.xp6(1),t.hij(" ",e.dsdato," ")}}function st(i,o){if(1&i&&(t.TgZ(0,"mat-option",28),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.Q6J("value",e.nmdato),t.xp6(1),t.hij(" ",e.dsdato," ")}}class M{constructor(o,e,a,n,l,m,g,h){this.dialogRef=o,this.muestraService=e,this.clienteService=a,this.fb=n,this.swetAlert=l,this.dialog=m,this.inData=g,this.auth=h,this.ListaTipoRecipiente=[],this.ListaTipoMuestra=[],this.ListaPreservacion=[],this.ListaTomadoPor=[],this.Estantes={residual:[{valor:1,estado:""},{valor:2,estado:""},{valor:3,estado:""},{valor:4,estado:""},{valor:5,estado:""},{valor:6,estado:""},{valor:7,estado:""},{valor:8,estado:""},{valor:9,estado:""},{valor:10,estado:""},{valor:11,estado:""}],natural:[{valor:12,estado:""},{valor:13,estado:""},{valor:14,estado:""},{valor:15,estado:""},{valor:16,estado:""},{valor:17,estado:""},{valor:18,estado:""},{valor:19,estado:""},{valor:20,estado:""},{valor:21,estado:""}],potable:[{valor:"nevera",estado:""}],otros:[{valor:"otros",estado:""}]},this.customersActive=[],this.options=[],this.clientsName=[],this.datePipe=new A.uU("en-US"),this.formMuestra=this.fb.group({cdunimuestra:[""],dtfechacreacion:[""],dtfechamodificacion:[""],dtfechatoma:["",[r.kI.required]],cdcodmuestra:["",[r.kI.required]],dscliente:["",[r.kI.required]],cdtipomuestra:["",[r.kI.required]],cdtiporecipiente:["",[r.kI.required]],dspuntorecoleccion:["",[r.kI.required]],dsubicacion:["",[r.kI.required]],cdpreservacion:["",[r.kI.required]],cdtomadapor:["",[r.kI.required]],nmvolumen:["",[r.kI.required,r.kI.max(2147483647)]],cdestado:[""],dstipomuestra:[""],dstiporecipiente:[""],dspreservacion:[""],dstomadapor:[""],fedesdetoma:[""],fehastatoma:[""],dsparametrosanalisis:[""],dsestante:["",[r.kI.required]],cdusuario:[""],cduniccliente:["",[r.kI.required]]}),this.ELEMENT_DATA=[],this.formMuestra.get("cdusuario").setValue(this.auth.getCurrentUser().email),null!==g&&(this.formMuestra.setValue(g.muestra),this.setEstantes(g.muestra.cdtipomuestra))}ngOnInit(){this.getCustomerActive(),this.listarMaestras(),this.formMuestra.get("dscliente").valueChanges.subscribe(o=>{console.log("\u{1f680} ~ file: add-edit-muestra.component.ts ~ line 86 ~ AddEditMuestraComponent ~ this.formMuestra.get ~ response",o),this.filterData(o);const e=this.getIdClient(o);this.formMuestra.controls.cduniccliente.setValue(e)})}listarMaestras(){this.blockUI.start("Cargando..."),this.muestraService.listaMaestra().subscribe(o=>{this.ListaTipoRecipiente=o.TIPO_RECIPIENTE,this.ListaTipoMuestra=o.TIPO_MUESTRA,this.ListaPreservacion=o.PRESERVACION,this.ListaTomadoPor=o.TOMADA_POR,this.blockUI.stop()},o=>{s().fire("ERROR",o,"error"),this.blockUI.stop()})}saveOrUpdate(){null==this.formMuestra.get("cduniccliente").errors?null===this.inData?this.insert():this.updateMuestra():this.swetAlert.warning("Debes seleccionar un cliente existente","")}insert(){this.formMuestra.invalid?this.swetAlert.warning("Debes diligenciar todo el formulario",""):this.swetAlert.confirmacion("\xbfDeseas agregar esta muestra?").then(o=>{o.isConfirmed&&(this.blockUI.start("Guardando..."),this.muestraService.insert(this.formMuestra.getRawValue()).subscribe(e=>{200===e.status?(this.dialogRef.close({cdcodmuestra:this.formMuestra.get("cdcodmuestra").value}),this.blockUI.stop(),s().fire(e.message,"","success")):(this.blockUI.stop(),s().fire("",e.message,"error"))},e=>{s().fire("ERROR","Error al agregar la muestra","error")}))})}updateMuestra(){this.formMuestra.get("cdunimuestra")?.setValue(this.inData.muestra.cdunimuestra),this.formMuestra.invalid?this.swetAlert.warning("Debes diligenciar todo el formulario",""):this.swetAlert.confirmacion("\xbfDeseas actualizar la muestra?").then(o=>{o.isConfirmed&&(this.blockUI.start("Cargando..."),this.muestraService.updateMuestra(this.formMuestra.getRawValue()).subscribe(e=>{200===e.status?(this.dialogRef.close(),s().fire(e.message,"","success"),this.blockUI.stop()):(this.dialogRef.close(),s().fire("ERROR",e.message,"error"),this.blockUI.stop())},e=>{this.blockUI.stop(),s().fire("ERROR",e,"error")}))})}codigo(){if(null!=this.inData)return;let o=this.formMuestra.get("dtfechatoma")?.value,e=this.datePipe.transform(o,"yyyy-MM-dd");null==this.inData||e!==this.inData.muestra.dtfechatoma?this.muestraService.countRegisterByDate(this.datePipe.transform(o,"yyyy-MM-dd")).subscribe(a=>{this.blockUI.start("Cargando...");let n=this.datePipe.transform(o,"dd-MM-yy")?.replace(/-/g,"")+`-${a}`;this.formMuestra.get("cdcodmuestra")?.setValue(n),this.blockUI.stop()},a=>{this.blockUI.stop(),s().fire("",a,"error")}):this.formMuestra.get("cdcodmuestra")?.setValue(this.inData.muestra.cdcodmuestra)}setEstantes(o){null!=this.inData&&this.formMuestra.get("dsestante").setValue(this.inData.muestra.dsestante),(1==o||2==o)&&(this.ListaEstantes=this.Estantes.natural),3==o&&(this.ListaEstantes=this.Estantes.residual),4==o&&(this.ListaEstantes=this.Estantes.potable),5==o&&(this.ListaEstantes=this.Estantes.otros)}getCustomerActive(){this.clienteService.getaAllActive().subscribe(o=>{200===o.status&&(this.customersActive=o.data,this.customersActive.forEach(e=>{this.clientsName.push(e.dsnombreCompleto)}),this.options=this.clientsName,this.filteredOptions=this.clientsName)})}filterData(o){this.filteredOptions=this.options.filter(e=>e.toLowerCase().indexOf(o.toLowerCase())>-1)}openDialogAdd(){this.dialog.open(X.m).afterClosed().subscribe(e=>{e&&this.getAll()})}getAll(){this.blockUI.start("Cargando..."),this.clienteService.getaAll().subscribe(o=>{console.log(o),200==o.status?(this.ELEMENT_DATA=o.data,console.log(o),this.blockUI.stop()):(this.blockUI.stop(),s().fire("",o.message,"error"))})}getIdClient(o){let a="";return this.customersActive.forEach(n=>{n.dsnombreCompleto===o&&(a=n.cduniccliente)}),a}}M.\u0275fac=function(o){return new(o||M)(t.Y36(c.so),t.Y36(U),t.Y36(O.$),t.Y36(r.qu),t.Y36(I.o),t.Y36(c.uw),t.Y36(c.WI),t.Y36(F.e))},M.\u0275cmp=t.Xpm({type:M,selectors:[["app-add-edit-muestra"]],decls:82,vars:12,consts:[["mat-dialog-close","","mat-icon-button","","matTooltip","Cerrar","matTooltipPosition","left",1,"close"],[1,"container"],[1,"hijo"],[3,"formGroup"],[1,"mat-typography"],[1,"row"],["matInput","","formControlName","dtfechatoma","required","",3,"matDatepicker","ngModelChange"],["matSuffix","",3,"for"],["touchUi",""],["picker",""],["readonly","","matInput","","formControlName","cdcodmuestra","required",""],[1,"column3"],["formControlName","cdtipomuestra","required",""],[3,"value","click",4,"ngFor","ngForOf"],["formControlName","dsestante","required",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","cdtiporecipiente","required",""],[1,"full-width","ml-1.5"],["matInput","","formControlName","dscliente","maxlength","200","required","",3,"matAutocomplete"],["auto","matAutocomplete"],["matInput","","formControlName","dspuntorecoleccion","maxlength","200","required",""],["matInput","","formControlName","nmvolumen","type","number","required",""],["matInput","","formControlName","dsubicacion","maxlength","200","required",""],["formControlName","cdpreservacion","required",""],["formControlName","cdtomadapor","required",""],["align","center"],["mat-mini-fab","",3,"matTooltip","click"],[3,"value","click"],[3,"value"]],template:function(o,e){if(1&o&&(t.TgZ(0,"button",0),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA(),t.qZA(),t.TgZ(3,"div",1),t.TgZ(4,"div",2),t.TgZ(5,"h2"),t._uU(6),t.qZA(),t._UZ(7,"br"),t.TgZ(8,"form",3),t.TgZ(9,"mat-dialog-content",4),t.TgZ(10,"div",5),t.TgZ(11,"mat-form-field"),t.TgZ(12,"mat-label"),t._uU(13,"Fecha de la toma"),t.qZA(),t.TgZ(14,"input",6),t.NdJ("ngModelChange",function(){return e.codigo()}),t.qZA(),t._UZ(15,"mat-datepicker-toggle",7),t._UZ(16,"mat-datepicker",8,9),t.qZA(),t.TgZ(18,"mat-form-field"),t.TgZ(19,"mat-label"),t._uU(20,"C\xf3digo"),t.qZA(),t._UZ(21,"input",10),t.qZA(),t.qZA(),t.TgZ(22,"div",5),t.TgZ(23,"mat-form-field",11),t.TgZ(24,"mat-label"),t._uU(25,"Tipo de muestra"),t.qZA(),t.TgZ(26,"mat-select",12),t.YNc(27,ot,2,2,"mat-option",13),t.qZA(),t.qZA(),t.TgZ(28,"mat-form-field",11),t.TgZ(29,"mat-label"),t._uU(30,"Estante"),t.qZA(),t.TgZ(31,"mat-select",14),t.YNc(32,it,2,3,"mat-option",15),t.qZA(),t.qZA(),t.TgZ(33,"mat-form-field",11),t.TgZ(34,"mat-label"),t._uU(35,"Tipo de recipiente"),t.qZA(),t.TgZ(36,"mat-select",16),t.YNc(37,at,2,2,"mat-option",15),t.qZA(),t.qZA(),t.qZA(),t.TgZ(38,"div",5),t.TgZ(39,"mat-form-field",17),t.TgZ(40,"mat-label"),t.TgZ(41,"mat-icon"),t._uU(42,"person"),t.qZA(),t._uU(43," Cliente "),t.qZA(),t._UZ(44,"input",18),t.TgZ(45,"mat-autocomplete",null,19),t.YNc(47,nt,2,2,"mat-option",15),t.qZA(),t.qZA(),t.qZA(),t.TgZ(48,"div",5),t.TgZ(49,"mat-form-field",11),t.TgZ(50,"mat-label"),t.TgZ(51,"mat-icon"),t._uU(52,"place"),t.qZA(),t._uU(53,"Punto de recolecci\xf3n "),t.qZA(),t._UZ(54,"input",20),t.qZA(),t.TgZ(55,"mat-form-field",11),t.TgZ(56,"mat-label"),t.TgZ(57,"mat-icon"),t._uU(58,"science"),t.qZA(),t._uU(59,"Volumen(ml) "),t.qZA(),t._UZ(60,"input",21),t.qZA(),t.TgZ(61,"mat-form-field",11),t.TgZ(62,"mat-label"),t.TgZ(63,"mat-icon"),t._uU(64,"place"),t.qZA(),t._uU(65,"Ubicaci\xf3n "),t.qZA(),t._UZ(66,"input",22),t.qZA(),t.qZA(),t.TgZ(67,"div",5),t.TgZ(68,"mat-form-field"),t.TgZ(69,"mat-label"),t._uU(70,"Preservaci\xf3n"),t.qZA(),t.TgZ(71,"mat-select",23),t.YNc(72,rt,2,2,"mat-option",15),t.qZA(),t.qZA(),t.TgZ(73,"mat-form-field"),t.TgZ(74,"mat-label"),t._uU(75,"Tomado por"),t.qZA(),t.TgZ(76,"mat-select",24),t.YNc(77,st,2,2,"mat-option",15),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(78,"mat-dialog-actions",25),t.TgZ(79,"button",26),t.NdJ("click",function(){return e.saveOrUpdate()}),t.TgZ(80,"mat-icon"),t._uU(81,"save"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&o){const a=t.MAs(17),n=t.MAs(46);t.xp6(6),t.Oqu(null===e.inData?"AGREGAR MUESTRA":"ACTUALIZAR MUESTRA"),t.xp6(2),t.Q6J("formGroup",e.formMuestra),t.xp6(6),t.Q6J("matDatepicker",a),t.xp6(1),t.Q6J("for",a),t.xp6(12),t.Q6J("ngForOf",e.ListaTipoMuestra),t.xp6(5),t.Q6J("ngForOf",e.ListaEstantes),t.xp6(5),t.Q6J("ngForOf",e.ListaTipoRecipiente),t.xp6(7),t.Q6J("matAutocomplete",n),t.xp6(3),t.Q6J("ngForOf",e.filteredOptions),t.xp6(25),t.Q6J("ngForOf",e.ListaPreservacion),t.xp6(5),t.Q6J("ngForOf",e.ListaTomadoPor),t.xp6(2),t.s9C("matTooltip",null==e.inData?"Guardar":"Actualizar")}},directives:[N.lW,c.ZT,L.gM,Q.Hw,r._Y,r.JL,r.sg,c.xY,_.KE,_.hX,J.Nt,r.Fj,b.hl,r.JJ,r.u,r.Q7,b.nW,_.R9,b.Mq,Y.gD,A.sg,K.ZL,r.nD,K.XC,r.wV,c.H8,V.ey],styles:[".custom-dialog-container[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{width:40vw}.close[_ngcontent-%COMP%]{float:right;cursor:pointer}h2[_ngcontent-%COMP%]{text-align:center}.row[_ngcontent-%COMP%]{margin-top:2%;margin-bottom:2%;display:flex;justify-content:space-between}.mat-form-field[_ngcontent-%COMP%]{width:48%}.full-width[_ngcontent-%COMP%]{width:100%}.continue[_ngcontent-%COMP%], .cancel[_ngcontent-%COMP%]{width:100%}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:40%}.with-80[_ngcontent-%COMP%]{width:90%}.mat-mini-fab.mat-accent[_ngcontent-%COMP%]{background-color:#27c34a}.mat-mini-fab.mat-accent[_ngcontent-%COMP%]:hover{background-color:#114a1d}.column3[_ngcontent-%COMP%]{width:30%}.buttons[_ngcontent-%COMP%]{width:40%;justify-content:space-between;display:flex;margin:2% auto auto}input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}@media only screen and (max-width: 768px){.custom-dialog-container[_ngcontent-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]{width:110vw}header[_ngcontent-%COMP%]{align-items:center}.container[_ngcontent-%COMP%]{display:flex;align-items:center;width:90%}.mat-form-field[_ngcontent-%COMP%]{width:48%}.full-width[_ngcontent-%COMP%]{width:100%}.continue[_ngcontent-%COMP%], .cancel[_ngcontent-%COMP%]{width:100%}.continue[_ngcontent-%COMP%]{background-color:#27c34a;color:#fff}.buttons[_ngcontent-%COMP%]{width:70%;justify-content:space-between;display:flex;margin:2% auto auto}}"]}),(0,T.gn)([(0,f.bH)()],M.prototype,"blockUI",void 0);const p=JSON.parse('{"ph":{"Ul":"Ph","iy":"PLA-006","xM":"SM 4500-H+ B","SD":"pH","aO":"ph"},"ZO":{"Ul":"CONDUCTIVIDAD EL\xc9CTRICA","iy":"PLA-007","xM":"SM 2510 B","SD":"\xb5s/cm","aO":"conductividad"},"I0":{"Ul":"COLOR REAL","iy":"PLA-029","xM":"SM 2120 C","SD":"UPC","aO":"colorreal"},"Wy":{"Ul":"COLOR APARENTE","iy":"PLA-029","xM":"SM 2120 C","SD":"UPC","aO":"coloraparente"},"$j":{"Ul":"TURBIDEZ","iy":"PLA-030","xM":"SM 2130 B","SD":"NTU","aO":"turbidez"}}');let ut=(()=>{class i{constructor(e){this.http=e,this.urlBase=v.N.urlBase}insert(e){return this.http.post(`${this.urlBase}/tqui-analisis-basico`,e)}getAnalisisBasicos(e,a){return this.http.get(`${this.urlBase}/tqui-analisis-basico/${e}/${a}`)}updateAnalisisBasico(e){return this.http.put(`${this.urlBase}/tqui-analisis-basico`,e)}deleteAnalisiBasico(e){return this.http.delete(`${this.urlBase}/tqui-analisis-basico/${e}`)}getEquipoMEdicion(e){return this.http.get(`${this.urlBase}/tquidatamaestras/equipo-medicion/${e}`)}updateEstadoPenAproCalidad(e){return this.http.get(`${this.urlBase}/tqui-analisis-basico/actualizar-estado-pendiente-calidad/${e}`)}aprobarAnalisisCalidad(e,a){return this.http.get(`${this.urlBase}/tqui-analisis-basico/aprobar-analisis-calidad/${e}/${a}`)}updateParametroRechazado(e){return this.http.get(`${this.urlBase}/tqui-analisis-basico/actualizar-estado-rechazado/${e}`)}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(k.eN))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var tt=u(8925);function dt(i,o){if(1&i&&(t.TgZ(0,"mat-option",40),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.Q6J("value",e.nmdato),t.xp6(1),t.hij(" ",e.dsdato," ")}}function mt(i,o){1&i&&(t.TgZ(0,"div",41),t.TgZ(1,"div",29),t.TgZ(2,"p",5),t._uU(3,"ESTANDARES DE CALIBRACI\xd3N"),t.qZA(),t.qZA(),t.TgZ(4,"div"),t.TgZ(5,"P"),t._uU(6,"pH:"),t.qZA(),t.TgZ(7,"P",42),t._uU(8,"4.00"),t.qZA(),t.TgZ(9,"P"),t._uU(10,"7.00"),t.qZA(),t.TgZ(11,"P"),t._uU(12,"10.00"),t.qZA(),t.qZA(),t.TgZ(13,"div",43),t.TgZ(14,"P"),t._uU(15,"UNIDAD:(mV)"),t.qZA(),t.TgZ(16,"P"),t._UZ(17,"input",44),t.qZA(),t.TgZ(18,"P"),t._UZ(19,"input",45),t.qZA(),t.TgZ(20,"P"),t._UZ(21,"input",46),t.qZA(),t.qZA(),t.TgZ(22,"div",47),t.TgZ(23,"span"),t.TgZ(24,"p",5),t._uU(25,"VALOR DE LA PENDIENTE"),t.qZA(),t.TgZ(26,"P"),t._UZ(27,"input",48),t.qZA(),t.qZA(),t.qZA(),t.qZA())}function pt(i,o){1&i&&(t.TgZ(0,"div",41),t.TgZ(1,"div",29),t.TgZ(2,"p",5),t._uU(3,"ESTANDARES DE CALIBRACI\xd3N"),t.qZA(),t.qZA(),t.TgZ(4,"div"),t.TgZ(5,"P"),t._uU(6,"ESTANDAR"),t.qZA(),t.TgZ(7,"P",42),t._uU(8,"1412 \xb5m/cm"),t.qZA(),t.qZA(),t.TgZ(9,"div",47),t.TgZ(10,"span"),t.TgZ(11,"p",5),t._uU(12,"VALOR DE LA CONSTANTE DE CELDA"),t.qZA(),t.TgZ(13,"P"),t._UZ(14,"input",49),t.qZA(),t.qZA(),t.qZA(),t.qZA())}function gt(i,o){1&i&&(t.TgZ(0,"div",41),t.TgZ(1,"div",29),t.TgZ(2,"p",5),t._uU(3,"ESTANDARES DE CALIBRACI\xd3N"),t.qZA(),t.qZA(),t.TgZ(4,"div"),t.TgZ(5,"P"),t._uU(6,"EST\xc1NDAR"),t.qZA(),t.TgZ(7,"P",42),t._uU(8,"0.00"),t.qZA(),t.TgZ(9,"P"),t._uU(10,"250.00"),t.qZA(),t.qZA(),t.TgZ(11,"div",47),t.TgZ(12,"span"),t.TgZ(13,"p",50),t._uU(14,"VALOR OBTENIDO"),t.qZA(),t.TgZ(15,"P"),t._UZ(16,"input",51),t.qZA(),t.TgZ(17,"P"),t._UZ(18,"input",52),t.qZA(),t.qZA(),t.qZA(),t.qZA())}function ft(i,o){1&i&&(t.TgZ(0,"div",41),t.TgZ(1,"div",29),t.TgZ(2,"p",5),t._uU(3,"ESTANDARES DE CALIBRACI\xd3N"),t.qZA(),t.qZA(),t.TgZ(4,"div"),t.TgZ(5,"P"),t._uU(6,"EST\xc1NDAR"),t.qZA(),t.TgZ(7,"P",42),t._uU(8,"0.0"),t.qZA(),t.TgZ(9,"P"),t._uU(10,"40.0"),t.qZA(),t.qZA(),t.TgZ(11,"div",47),t.TgZ(12,"span"),t.TgZ(13,"p",50),t._uU(14,"VALOR OBTENIDO"),t.qZA(),t.TgZ(15,"P"),t._UZ(16,"input",53),t.qZA(),t.TgZ(17,"P"),t._UZ(18,"input",54),t.qZA(),t.qZA(),t.qZA(),t.qZA())}function ht(i,o){1&i&&(t.TgZ(0,"h2",55),t._uU(1,"Pendiente por aprobaci\xf3n de un director t\xe9cnico"),t.qZA())}function Zt(i,o){1&i&&(t.TgZ(0,"h2",55),t._uU(1,"Pendiente por aprobaci\xf3n de un oficial de calidad"),t.qZA())}function At(i,o){1&i&&(t.TgZ(0,"h2",56),t._uU(1,"Muestra totalmente aprobada"),t.qZA())}function _t(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"button",57),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveOrUpdate()}),t._uU(1),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.hij(" ",null===e.button?"Pasar a verificaci\xf3n del director":"Actualizar"," ")}}function Tt(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"button",58),t.NdJ("click",function(){return t.CHM(e),t.oxw().UpdateEstadPenAproCalidad()}),t._uU(2," Aprobar "),t.qZA(),t.TgZ(3,"button",59),t.NdJ("click",function(){return t.CHM(e),t.oxw().updateParametroRechazado()}),t._uU(4," Rechazar "),t.qZA(),t.qZA()}}function bt(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"button",58),t.NdJ("click",function(){return t.CHM(e),t.oxw().aprobarAnalisis()}),t._uU(2," Aprobar "),t.qZA(),t.TgZ(3,"button",59),t.NdJ("click",function(){return t.CHM(e),t.oxw().updateParametroRechazado()}),t._uU(4," Rechazar "),t.qZA(),t.qZA()}}class R extends class extends class{validarRequired(o,e){return"ph"===o?(e.controls.unidad1.addValidators([r.kI.required]),e.controls.unidad2.addValidators([r.kI.required]),e.controls.unidad3.addValidators([r.kI.required]),e.controls.vlrPendiente.addValidators([r.kI.required]),e.controls.vlrCosnCelda.clearValidators(),e.controls.cero.clearValidators(),e.controls.docientoscincuenta.clearValidators(),e.controls.vlrObtenido1.clearValidators(),void e.controls.vlrObtenido2.clearValidators()):"conductividad"===o?(e.controls.vlrCosnCelda.addValidators([r.kI.required]),e.controls.unidad1.clearValidators(),e.controls.unidad2.clearValidators(),e.controls.unidad3.clearValidators(),e.controls.vlrPendiente.clearValidators(),e.controls.cero.clearValidators(),e.controls.docientoscincuenta.clearValidators(),e.controls.vlrObtenido1.clearValidators(),void e.controls.vlrObtenido2.clearValidators()):"colorA"===o||"colorR"===o?(e.controls.cero.addValidators([r.kI.required]),e.controls.docientoscincuenta.addValidators([r.kI.required]),e.controls.unidad1.clearValidators(),e.controls.unidad2.clearValidators(),e.controls.unidad3.clearValidators(),e.controls.vlrPendiente.clearValidators(),e.controls.vlrCosnCelda.clearValidators(),e.controls.vlrObtenido1.clearValidators(),void e.controls.vlrObtenido2.clearValidators()):"turbidez"===o?(e.controls.vlrObtenido1.addValidators([r.kI.required]),e.controls.vlrObtenido2.addValidators([r.kI.required]),e.controls.cero.clearValidators(),e.controls.docientoscincuenta.clearValidators(),e.controls.unidad1.clearValidators(),e.controls.unidad2.clearValidators(),e.controls.unidad3.clearValidators(),e.controls.vlrPendiente.clearValidators(),void e.controls.vlrCosnCelda.clearValidators()):void 0}}{constructor(){super(),this.analisis={titulo:"",procedimiento:"",metodo:"",unidades:"",tipo:""}}tipoAnalisis(o,e){return"ph"===o?(this.validarRequired(o,e),this.analisis.titulo=p.ph.Ul,this.analisis.procedimiento=p.ph.iy,this.analisis.metodo=p.ph.xM,this.analisis.unidades=p.ph.SD,this.analisis.tipo=p.ph.aO,this.analisis):"conductividad"===o?(this.analisis.titulo=p.ZO.Ul,this.analisis.procedimiento=p.ZO.iy,this.analisis.metodo=p.ZO.xM,this.analisis.unidades=p.ZO.SD,this.analisis.tipo=p.ZO.aO,this.analisis):"coloraparente"===o?(this.analisis.titulo=p.Wy.Ul,this.analisis.procedimiento=p.Wy.iy,this.analisis.metodo=p.Wy.xM,this.analisis.unidades=p.Wy.SD,this.analisis.tipo=p.Wy.aO,this.analisis):"colorreal"===o?(this.analisis.titulo=p.I0.Ul,this.analisis.procedimiento=p.I0.iy,this.analisis.metodo=p.I0.xM,this.analisis.unidades=p.I0.SD,this.analisis.tipo=p.I0.aO,this.analisis):"turbidez"===o?(this.analisis.titulo=p.$j.Ul,this.analisis.procedimiento=p.$j.iy,this.analisis.metodo=p.$j.xM,this.analisis.unidades=p.$j.SD,this.analisis.tipo=p.$j.aO,this.analisis):void 0}}{constructor(o,e,a,n,l,m,g){super(),this.dialogRef=o,this.swetAlert=e,this.service=a,this.mailService=n,this.fb=l,this.auth=m,this.inData=g,this.analisis={titulo:"",procedimiento:"",metodo:"",unidades:"",tipo:""},this.listaEquipoMedicion=[],this.formBasicos=this.fb.group({cdunicanalisisbasico:[""],cdunimuestra:[""],tipoanalisis:[""],equipoMedicion:["",[r.kI.required]],codigo:["",[r.kI.required]],codigoMuestra:["",[r.kI.required]],fechaToma:[new Date,[r.kI.required]],lectura1:["",[r.kI.required]],lectura2:["",[r.kI.required]],promedio:["",[r.kI.required]],observaciones:["",[r.kI.required]],vlrTeorico:["",[r.kI.required]],vlrReal:["",[r.kI.required]],recuperacion:["",[r.kI.required]],cdestado:[""],cdusuario:[""],unidad1:[""],unidad2:[""],unidad3:[""],vlrPendiente:[""],vlrCosnCelda:[""],cero:[""],docientoscincuenta:[""],vlrObtenido1:[""],vlrObtenido2:[""]}),this.equipoMedicion(this.inData.cdmaestro),this.rol=m.getCurrentUser().roles[0].authority,this.formBasicos.get("cdusuario").setValue(this.auth.getCurrentUser().email)}ngOnInit(){this.formBasicos.get("codigoMuestra")?.setValue(this.inData.cdcodmuestra),this.analisis=this.tipoAnalisis(this.inData.tipoAnalisis,this.formBasicos),this.formBasicos.get("tipoanalisis")?.setValue(this.analisis.tipo),this.formBasicos.get("cdunimuestra")?.setValue(this.inData.cdunimuestra),this.getAnalisisBasicos(this.inData.cdunimuestra,this.inData.tipoAnalisis),this.desactivarFormulario()}desactivarFormulario(){}promedio(){this.formBasicos.get("promedio")?.setValue((this.formBasicos.get("lectura1")?.value+this.formBasicos.get("lectura2")?.value)/2)}recuperacion(){this.formBasicos.get("recuperacion")?.setValue(this.formBasicos.get("vlrReal")?.value/this.formBasicos.get("vlrTeorico")?.value*100)}saveOrUpdate(){null===this.button?this.insert():this.updateAnalisis()}insert(){this.formBasicos.invalid?this.swetAlert.warning("Debes diligenciar todo el formulario",""):this.swetAlert.confirmacion("\xbfDeseas pasar este par\xe1metro a verificaci\xf3n del director?").then(o=>{o.isConfirmed&&this.service.insert(this.formBasicos.getRawValue()).subscribe(e=>{200===e.status?(this.blockUI.stop(),s().fire(e.message,"","success"),this.dialogRef.close()):(s().fire("",e.message,"error"),this.blockUI.stop(),this.dialogRef.close())},e=>{s().fire("ERROR",e,"error")})})}updateAnalisis(){this.formBasicos.invalid?this.swetAlert.warning("Debes diligenciar todo el formulario",""):this.swetAlert.confirmacion("\xbfDeseas actualizar el an\xe1lisis?").then(o=>{o.isConfirmed&&(this.blockUI.start("Cargando..."),this.service.updateAnalisisBasico(this.formBasicos.getRawValue()).subscribe(e=>{200===e.status?(this.dialogRef.close(),s().fire(e.message,"","success")):(s().fire("",e.message,"error"),this.blockUI.stop(),this.dialogRef.close())},e=>{s().fire("ERROR",e,"error")}))})}getAnalisisBasicos(o,e){this.blockUI.start("Cargando..."),this.service.getAnalisisBasicos(o,e).subscribe(a=>{if(200==a.status){if(null===a.data)return this.button=null,void this.blockUI.stop();this.estadoParametro=a.data.cdestado,this.formBasicos.setValue(a.data),this.formBasicos.get("fechaToma")?.setValue(a.data.fechaToma),this.blockUI.stop()}else this.blockUI.stop(),s().fire("",a.message,"error")},a=>{this.blockUI.stop(),s().fire("ERROR","Ha ocurrido un error","error")})}eliminar(){let o=this.formBasicos.get("cdunicanalisisbasico")?.value;this.swetAlert.confirmacion(`\xbfDeseas eliminar el an\xe1lisis de ${this.analisis.titulo} de la muestra?`).then(e=>{e.isConfirmed&&this.service.deleteAnalisiBasico(o).subscribe(a=>{200===a.status?s().fire(`Se ha eliminado el an\xe1lisis ${this.analisis.titulo} de esta muestra`,"","success"):s().fire("ERROR",a.message,"error"),this.dialogRef.close()},a=>{s().fire("ERROR","Ha ocurrido un error al intentar eliminar el an\xe1lisis","error")})})}equipoMedicion(o){this.service.getEquipoMEdicion(o).subscribe(e=>{200==e.status?this.listaEquipoMedicion=e.data:s().fire("",e.message,"error")},e=>{s().fire("ERROR","Ha ocurrido un error al obtener el equipo de medici\xf3n","error")})}UpdateEstadPenAproCalidad(){this.swetAlert.confirmacion("Una vez aprobada este an\xe1lisis pasar\xe1 a verificaci\xf3n por un oficial de calidad").then(o=>{o.isConfirmed&&(this.blockUI.start("Cargando..."),this.service.updateEstadoPenAproCalidad(this.formBasicos.get("cdunicanalisisbasico").value).subscribe(e=>{200==e.status?(this.blockUI.stop(),s().fire(e.message,"","success"),this.dialogRef.close()):(this.blockUI.stop(),s().fire("",e.message,"error"),this.dialogRef.close())}))})}aprobarAnalisis(){let o=this.formBasicos.get("cdunicanalisisbasico").value,e=this.formBasicos.get("cdunimuestra").value;this.swetAlert.confirmacion("\xbfDeseas aprobar este an\xe1lisis?").then(a=>{a.isConfirmed&&(this.blockUI.start("Cargando..."),this.service.aprobarAnalisisCalidad(o,e).subscribe(n=>{200==n.status?(this.blockUI.stop(),s().fire(n.message,"","success"),this.dialogRef.close()):(this.blockUI.stop(),s().fire("",n.message,"error"),this.dialogRef.close())}))})}updateParametroRechazado(){let o=this.formBasicos.get("cdunicanalisisbasico")?.value;this.swetAlert.confirmacion("\xbfDeseas rechazar este an\xe1lisis?").then(e=>{e.isConfirmed&&this.service.updateParametroRechazado(o).subscribe(a=>{this.blockUI.start("Rechazando..."),200==a.status?(this.blockUI.stop(),this.dialogRef.close(),s().fire("",a.message,"success"),console.log(a.data,"okkkkkkk"),this.mailService.sendMailAnalisisBasic(a.data).subscribe(n=>{s().fire("",n.message,"success")})):(this.blockUI.stop(),s().fire("",a.message,"error"),this.dialogRef.close())},a=>{this.blockUI.stop(),this.dialogRef.close(),s().fire("",a,"error")})})}}R.\u0275fac=function(o){return new(o||R)(t.Y36(c.so),t.Y36(I.o),t.Y36(ut),t.Y36(tt.Y),t.Y36(r.qu),t.Y36(F.e),t.Y36(c.WI))},R.\u0275cmp=t.Xpm({type:R,selectors:[["app-basicos"]],features:[t.qOj],decls:111,vars:19,consts:[["mat-dialog-close","","mat-icon-button","","matTooltip","Cerrar","matTooltipPosition","right",1,"close",2,"float","right"],[1,"containerFather"],[3,"formGroup"],[2,"text-align","center"],[1,"left"],[2,"color","black"],["formControlName","equipoMedicion",2,"border","none","border-bottom","1px solid","background-color","transparent","width","170px"],[3,"value",4,"ngFor","ngForOf"],[1,"rigth"],["maxlength","20","matInput","","formControlName","codigo",2,"border","none","border-bottom","1px solid","background-color","transparent","width","120px"],[1,"container"],[1,"form1"],[1,"row"],["matInput","","readonly","","formControlName","codigoMuestra"],["matInput","","formControlName","fechaToma",3,"matDatepicker"],["matSuffix","",3,"for"],["touchUi",""],["picker",""],[1,"col3"],["matInput","","type","number","min","0","formControlName","lectura1",3,"ngModelChange"],["matInput","","type","number","min","0","formControlName","lectura2",3,"ngModelChange"],["matInput","","readonly","","type","number","min","0","formControlName","promedio"],["appearance","outline",1,"full-width"],["matInput","","maxlength","255","required","","formControlName","observaciones",2,"height","80px"],["message",""],["align","end"],[1,"form2"],["class","container1",4,"ngIf"],[1,"container2"],[2,"width","25%","display","flex","align-items","center"],[2,"width","75%"],["matInput","","type","number","min","0","formControlName","vlrTeorico",3,"ngModelChange"],["matInput","","type","number","min","0","formControlName","vlrReal",3,"ngModelChange"],[1,"full-width"],["matInput","","readonly","","type","number","min","0","formControlName","recuperacion"],["align","center"],["style","text-align: center; color: red;",4,"ngIf"],["style","text-align: center; color: green;",4,"ngIf"],["mat-button","","type","submit","class","boton",3,"click",4,"ngIf"],[4,"ngIf"],[3,"value"],[1,"container1"],[2,"margin-top","20px"],[2,"margin-left","25px","margin-bottom","6px"],["matInput","","type","number","formControlName","unidad1","min","0",2,"margin-top","14px"],["matInput","","type","number","formControlName","unidad2","min","0"],["matInput","","type","number","formControlName","unidad3","min","0"],[2,"margin-left","25px","margin-bottom","6px","display","flex","align-items","center"],["matInput","","type","number","formControlName","vlrPendiente","min","0",2,"border","none","border-bottom","1px solid","background-color","transparent","width","100%"],["matInput","","type","number","min","0","formControlName","vlrCosnCelda",2,"border","none","border-bottom","1px solid","background-color","transparent","width","100%"],[2,"color","black","text-align","center"],["matInput","","formControlName","cero","formControlName","unidad2",2,"border","none","border-bottom","1px solid","background-color","transparent","width","100%"],["matInput","","formControlName","docientoscincuenta",2,"border","none","border-bottom","1px solid","background-color","transparent","width","100%"],["matInput","","formControlName","vlrObtenido1",2,"border","none","border-bottom","1px solid","background-color","transparent","width","100%"],["matInput","","formControlName","vlrObtenido2",2,"border","none","border-bottom","1px solid","background-color","transparent","width","100%"],[2,"text-align","center","color","red"],[2,"text-align","center","color","green"],["mat-button","","type","submit",1,"boton",3,"click"],["mat-button","",1,"boton",3,"click"],["color","warn","mat-raised-button","",3,"click"]],template:function(o,e){if(1&o&&(t.TgZ(0,"button",0),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA(),t.qZA(),t.TgZ(3,"div",1),t.TgZ(4,"form",2),t.TgZ(5,"h2",3),t.TgZ(6,"strong"),t._uU(7),t.qZA(),t.qZA(),t._UZ(8,"hr"),t.TgZ(9,"header"),t.TgZ(10,"div",4),t.TgZ(11,"div"),t.TgZ(12,"P"),t._uU(13,"PROCEDIMIENTO N\xb0: "),t.qZA(),t._UZ(14,"P"),t.TgZ(15,"P"),t._uU(16,"M\xc9TODO:"),t.qZA(),t.TgZ(17,"P"),t._uU(18,"EQUIPO DE MEDICI\xd3N:"),t.qZA(),t.qZA(),t.TgZ(19,"div"),t.TgZ(20,"p",5),t._uU(21),t.qZA(),t.TgZ(22,"p",5),t._uU(23),t.qZA(),t.TgZ(24,"p",5),t.TgZ(25,"mat-select",6),t.YNc(26,dt,2,2,"mat-option",7),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(27,"div",8),t.TgZ(28,"div"),t.TgZ(29,"P"),t._uU(30,"UNIDADES: "),t.qZA(),t._UZ(31,"P"),t.TgZ(32,"P"),t._uU(33,"C\xd3DIGO:"),t.qZA(),t.qZA(),t.TgZ(34,"div"),t.TgZ(35,"p",5),t._uU(36),t.qZA(),t.TgZ(37,"p",5),t._UZ(38,"input",9),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(39,"div",10),t.TgZ(40,"div",11),t._UZ(41,"br"),t.TgZ(42,"div",12),t.TgZ(43,"mat-form-field"),t.TgZ(44,"mat-label"),t._uU(45,"C\xf3digo de la muestra"),t.qZA(),t._UZ(46,"input",13),t.qZA(),t.TgZ(47,"mat-form-field"),t.TgZ(48,"mat-label"),t._uU(49,"Fecha de la toma"),t.qZA(),t._UZ(50,"input",14),t._UZ(51,"mat-datepicker-toggle",15),t._UZ(52,"mat-datepicker",16,17),t.qZA(),t.qZA(),t._UZ(54,"br"),t.TgZ(55,"div",12),t.TgZ(56,"mat-form-field",18),t.TgZ(57,"mat-label"),t._uU(58,"Lectura N\xb01"),t.qZA(),t.TgZ(59,"input",19),t.NdJ("ngModelChange",function(){return e.promedio()}),t.qZA(),t.qZA(),t.TgZ(60,"mat-form-field",18),t.TgZ(61,"mat-label"),t._uU(62,"Lectura N\xb02"),t.qZA(),t.TgZ(63,"input",20),t.NdJ("ngModelChange",function(){return e.promedio()}),t.qZA(),t.qZA(),t.TgZ(64,"mat-form-field",18),t.TgZ(65,"mat-label"),t._uU(66,"Promedio"),t.qZA(),t._UZ(67,"input",21),t.qZA(),t.qZA(),t._UZ(68,"br"),t.TgZ(69,"div",12),t.TgZ(70,"mat-form-field",22),t.TgZ(71,"mat-label"),t._uU(72,"Observaciones"),t.qZA(),t._UZ(73,"textarea",23,24),t.TgZ(75,"mat-hint",25),t._uU(76),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(77,"div",26),t.TgZ(78,"h2"),t._uU(79,"CALIBRACI\xd3N Y CONTROL INSTRUMENTAL"),t.qZA(),t.YNc(80,mt,28,0,"div",27),t.YNc(81,pt,15,0,"div",27),t.YNc(82,gt,19,0,"div",27),t.YNc(83,ft,19,0,"div",27),t.TgZ(84,"div"),t.TgZ(85,"div",28),t.TgZ(86,"div",29),t.TgZ(87,"p",5),t._uU(88,"ESTANDAR DE VERIFICACI\xd3N"),t.qZA(),t.qZA(),t.TgZ(89,"div",30),t.TgZ(90,"div",12),t.TgZ(91,"mat-form-field"),t.TgZ(92,"mat-label"),t._uU(93,"Valor te\xf3rico"),t.qZA(),t.TgZ(94,"input",31),t.NdJ("ngModelChange",function(){return e.recuperacion()}),t.qZA(),t.qZA(),t.TgZ(95,"mat-form-field"),t.TgZ(96,"mat-label"),t._uU(97,"Valor real"),t.qZA(),t.TgZ(98,"input",32),t.NdJ("ngModelChange",function(){return e.recuperacion()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(99,"div"),t.TgZ(100,"mat-form-field",33),t.TgZ(101,"mat-label"),t._uU(102,"% Recuperaci\xf3n"),t.qZA(),t._UZ(103,"input",34),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(104,"mat-dialog-actions",35),t.YNc(105,ht,2,0,"h2",36),t.YNc(106,Zt,2,0,"h2",36),t.YNc(107,At,2,0,"h2",37),t.YNc(108,_t,2,1,"button",38),t.YNc(109,Tt,5,0,"span",39),t.YNc(110,bt,5,0,"span",39),t.qZA(),t.qZA(),t.qZA()),2&o){const a=t.MAs(53),n=t.MAs(74);t.xp6(4),t.Q6J("formGroup",e.formBasicos),t.xp6(3),t.hij("AN\xc1LISIS DE ",e.analisis.titulo,""),t.xp6(14),t.Oqu(e.analisis.procedimiento),t.xp6(2),t.Oqu(e.analisis.metodo),t.xp6(3),t.Q6J("ngForOf",e.listaEquipoMedicion),t.xp6(10),t.hij(" \xa0 ",e.analisis.unidades,""),t.xp6(14),t.Q6J("matDatepicker",a),t.xp6(1),t.Q6J("for",a),t.xp6(25),t.hij("",n.value.length," / 255"),t.xp6(4),t.Q6J("ngIf","ph"==e.inData.tipoAnalisis),t.xp6(1),t.Q6J("ngIf","conductividad"==e.inData.tipoAnalisis),t.xp6(1),t.Q6J("ngIf","coloraparente"==e.inData.tipoAnalisis||"colorreal"==e.inData.tipoAnalisis),t.xp6(1),t.Q6J("ngIf","turbidez"==e.inData.tipoAnalisis),t.xp6(22),t.Q6J("ngIf","ROLE_DIRECTOR"!=e.rol&&43==e.estadoParametro),t.xp6(1),t.Q6J("ngIf","ROLE_QUIALITY"!=e.rol&&44==e.estadoParametro),t.xp6(1),t.Q6J("ngIf",45==e.estadoParametro),t.xp6(1),t.Q6J("ngIf",36!=e.inData.cdestadomuestra&&(42==e.estadoParametro||null==e.estadoParametro)&&"ROLE_ANALYST"==e.rol),t.xp6(1),t.Q6J("ngIf","ROLE_DIRECTOR"==e.rol&&43==e.estadoParametro),t.xp6(1),t.Q6J("ngIf","ROLE_QUIALITY"==e.rol&&44==e.estadoParametro)}},directives:[N.lW,c.ZT,L.gM,Q.Hw,r._Y,r.JL,r.sg,Y.gD,r.JJ,r.u,A.sg,J.Nt,r.Fj,r.nD,_.KE,_.hX,b.hl,b.nW,_.R9,b.Mq,r.qQ,r.wV,r.Q7,_.bx,A.O5,c.H8,V.ey],styles:[".containerFather[_ngcontent-%COMP%], form[_ngcontent-%COMP%]{margin:auto;width:min-content}P[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{margin-bottom:0;text-align:left;color:#27c34a}hr[_ngcontent-%COMP%]{width:55%;height:4px;background-color:#32d555;margin:0 auto 10px}header[_ngcontent-%COMP%]{margin:auto;width:60%;border:2px solid black;border-radius:30px;display:flex;justify-content:space-around;padding:10px 0;background-color:#fff}.left[_ngcontent-%COMP%], .rigth[_ngcontent-%COMP%]{display:flex;align-items:center}.container[_ngcontent-%COMP%]{padding-top:1%;width:100%;margin:auto;display:flex;justify-content:space-around}.form1[_ngcontent-%COMP%], .form2[_ngcontent-%COMP%]{padding:20px;border:2px solid black;border-radius:15px;width:45%}.form2[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#000;text-align:center}.mat-form-field[_ngcontent-%COMP%]{width:45%}.row[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.col3[_ngcontent-%COMP%]{width:30%}.full-width[_ngcontent-%COMP%]{width:100%}.container1[_ngcontent-%COMP%], .container2[_ngcontent-%COMP%]{border:2px solid #636363;margin:0 10px 10px;border-radius:10px;display:flex;justify-content:space-around;padding:10px}p[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;border-bottom:1px solid;background-color:transparent;width:120px;color:#000}.mat-form-field[_ngcontent-%COMP%]{color:#000}.boton[_ngcontent-%COMP%]{background-color:#27c34a;color:#fff}"]}),(0,T.gn)([(0,f.bH)()],R.prototype,"blockUI",void 0);const $=JSON.parse('{"ph":{"Ul":"ALCALINIDAD TOTAL","iy":"PLA-006","xM":"SM 4500-H+ B","SD":"pH","aO":"Ph"}}');var vt=u(9019);let kt=(()=>{class i{constructor(e){this.http=e,this.urlBase=vt.N.urlBase}insert(e){return this.http.post(`${this.urlBase}tqui-analisis-micro-Biologico`,e)}getAnalisisMicroBiologico(e,a){return this.http.get(`${this.urlBase}tqui-analisis-micro-Biologico/${e}/${a}`)}updateAnalisisMicroBiologico(e){return this.http.put(`${this.urlBase}tqui-analisis-micro-Biologico`,e)}getEquipoMEdicion(e){return this.http.get(`${this.urlBase}tquidatamaestras/equipo-medicion/${e}`)}deleteAnalisMicroBiologico(e){return this.http.delete(`${this.urlBase}tqui-analisis-micro-Biologico/${e}`)}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(k.eN))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Ut(i,o){if(1&i&&(t.TgZ(0,"mat-option",35),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.Q6J("value",e.nmdato),t.xp6(1),t.hij(" ",e.dsdato," ")}}function Ot(i,o){1&i&&(t.TgZ(0,"div",36),t.TgZ(1,"div",26),t.TgZ(2,"p",4),t._uU(3,"ESTANDARES DE CALIBRACI\xd3N"),t.qZA(),t.qZA(),t.TgZ(4,"div"),t.TgZ(5,"P"),t._uU(6,"pH:"),t.qZA(),t.TgZ(7,"P",37),t._uU(8,"4.00"),t.qZA(),t.TgZ(9,"P"),t._uU(10,"7.00"),t.qZA(),t.TgZ(11,"P"),t._uU(12,"10.00"),t.qZA(),t.qZA(),t.TgZ(13,"div",38),t.TgZ(14,"P"),t._uU(15,"UNIDAD:(mV)"),t.qZA(),t.TgZ(16,"P"),t._UZ(17,"input",39),t.qZA(),t.TgZ(18,"P"),t._UZ(19,"input",40),t.qZA(),t.TgZ(20,"P"),t._UZ(21,"input",41),t.qZA(),t.qZA(),t.TgZ(22,"div",42),t.TgZ(23,"span"),t.TgZ(24,"p",4),t._uU(25,"VALOR DE LA PENDIENTE"),t.qZA(),t.TgZ(26,"P"),t._UZ(27,"input",43),t.qZA(),t.qZA(),t.qZA(),t.qZA())}function Mt(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"button",44),t.NdJ("click",function(){return t.CHM(e),t.oxw().eliminar()}),t._uU(1," Eliminar "),t.qZA()}}let xt=(()=>{class i extends class extends class{validarRequired(o,e){"alcalinidad"!==o||e.controls.unidad1.addValidators([r.kI.required])}}{constructor(){super(),this.analisis={titulo:"",procedimiento:"",metodo:"",unidades:"",tipo:""}}tipoAnalisis(o,e){if("Ph"===o)return this.validarRequired(o,e),this.analisis.titulo=$.ph.Ul,this.analisis.procedimiento=$.ph.iy,this.analisis.metodo=$.ph.xM,this.analisis.unidades=$.ph.SD,this.analisis.tipo=$.ph.aO,this.analisis}}{constructor(e,a,n,l,m){super(),this.fb=e,this.inData=a,this.service=n,this.swetAlert=l,this.dialogRef=m,this.analisis={titulo:"",procedimiento:"",metodo:"",unidades:"",tipo:""},this.listaEquipoMedicion=[],this.formMicrobiologico=this.fb.group({cdunicanalisismicrobiologico:[""],cdunimuestra:[""],tipoanalisis:[""],equipoMedicion:["",[r.kI.required]],codigo:["",[r.kI.required]],codigoMuestra:["",[r.kI.required]],fechaToma:[new Date,[r.kI.required]],lectura1:["",[r.kI.required]],lectura2:["",[r.kI.required]],promedio:["",[r.kI.required]],observaciones:["",[r.kI.required]],vlrTeorico:["",[r.kI.required]],vlrReal:["",[r.kI.required]],recuperacion:["",[r.kI.required]],unidad1:[""],unidad2:[""],unidad3:[""],vlrPendiente:[""],vlrCosnCelda:[""],cero:[""],docientoscincuenta:[""],vlrObtenido1:[""],vlrObtenido2:[""]})}ngOnInit(){this.analisis=this.tipoAnalisis(this.inData.tipoAnalisis,this.formMicrobiologico)}equipoMedicion(e){this.service.getEquipoMEdicion(e).subscribe(a=>{this.listaEquipoMedicion=a.data},a=>{s().fire("ERROR","Ha ocurrido un error al obtener el equipo de medici\xf3n","error")})}eliminar(){let e=this.formMicrobiologico.get("cdunicanalisisbasico")?.value;this.swetAlert.confirmacion(`\xbfDeseas elimnar el an\xe1lisis de ${this.analisis.titulo} de la muestra?`).then(a=>{a.isConfirmed?this.service.deleteAnalisMicroBiologico(e).subscribe(n=>{200===n.status&&s().fire(`Se ha eliminado el an\xe1lisis ${this.analisis.titulo} de esta muestra`,"","success"),this.dialogRef.close()},n=>{s().fire("ERROR","Ha ocurrido un error al intentar eliminar el an\xe1lisis","error")}):a.isDenied&&s().fire("Cancelado","","info")})}saveOrUpdate(){null===this.button?this.insert():this.updateAnalisis()}insert(){this.formMicrobiologico.invalid?this.swetAlert.warning("Debes diligenciar todo el formulario",""):this.swetAlert.confirmacion("\xbfDeseas asociar este an\xe1lisis a la muestra?").then(e=>{e.isConfirmed?this.service.insert(this.formMicrobiologico.getRawValue()).subscribe(a=>{200===a.status&&(this.dialogRef.close(),s().fire(a.message,"","success"))},a=>{s().fire("ERROR","Error al agregar el an\xe1lisis","error")}):e.isDenied&&s().fire("Cancelado","","info")})}updateAnalisis(){this.formMicrobiologico.invalid?this.swetAlert.warning("Debes diligenciar todo el formulario",""):this.swetAlert.confirmacion("\xbfDeseas actualizar el an\xe1lisis?").then(e=>{e.isConfirmed?this.service.updateAnalisisMicroBiologico(this.formMicrobiologico.getRawValue()).subscribe(a=>{200===a.status&&(this.dialogRef.close(),s().fire(a.message,"","success"))},a=>{s().fire("ERROR","Error al actualizar el an\xe1lisis","error")}):e.isDenied&&s().fire("Cancelado","","info")})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(r.qu),t.Y36(c.WI),t.Y36(kt),t.Y36(I.o),t.Y36(c.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-microbiologico"]],features:[t.qOj],decls:98,vars:11,consts:[[1,"containerFather"],[3,"formGroup"],[2,"text-align","center"],[1,"left"],[2,"color","black"],["formControlName","equipoMedicion",2,"border","none","border-bottom","1px solid","background-color","transparent","width","170px"],[3,"value",4,"ngFor","ngForOf"],[1,"rigth"],["matInput","","formControlName","codigo",2,"border","none","border-bottom","1px solid","background-color","transparent","width","120px"],[1,"container"],[1,"form1"],[1,"row"],["matInput","","readonly","","formControlName","codigoMuestra"],["matInput","","formControlName","fechaToma",3,"matDatepicker"],["matSuffix","",3,"for"],["touchUi",""],["picker",""],[1,"col3"],["matInput","","type","number","min","0","formControlName","lectura1"],["matInput","","type","number","min","0","formControlName","lectura2"],["matInput","","readonly","","type","number","min","0","formControlName","promedio"],["appearance","outline",1,"full-width"],["matInput","","maxlength","200","required","","formControlName","observaciones"],[1,"form2"],["class","container1",4,"ngIf"],[1,"container2"],[2,"width","25%","display","flex","align-items","center"],[2,"width","75%"],["matInput","","type","number","min","0","formControlName","vlrTeorico"],["matInput","","type","number","min","0","formControlName","vlrReal"],[1,"full-width"],["matInput","","readonly","","type","number","min","0","formControlName","recuperacion"],["align","center"],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],["mat-button","","type","submit",3,"click"],[3,"value"],[1,"container1"],[2,"margin-top","20px"],[2,"margin-left","25px","margin-bottom","6px"],["matInput","","type","number","formControlName","unidad1","min","0"],["matInput","","type","number","formControlName","unidad2","min","0"],["matInput","","type","number","formControlName","unidad3","min","0"],[2,"margin-left","25px","margin-bottom","6px","display","flex","align-items","center"],["matInput","","type","number","formControlName","vlrPendiente","min","0",2,"border","none","border-bottom","1px solid","background-color","transparent","width","100%"],["mat-raised-button","","color","warn",3,"click"]],template:function(e,a){if(1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"form",1),t.TgZ(2,"h2",2),t._uU(3),t.qZA(),t._UZ(4,"hr"),t.TgZ(5,"header"),t.TgZ(6,"div",3),t.TgZ(7,"div"),t.TgZ(8,"P"),t._uU(9,"PROCEDIMIENTO N\xb0: "),t.qZA(),t._UZ(10,"P"),t.TgZ(11,"P"),t._uU(12,"M\xc9TODO:"),t.qZA(),t.TgZ(13,"P"),t._uU(14,"EQUIPO DE MEDICI\xd3N:"),t.qZA(),t.qZA(),t.TgZ(15,"div"),t.TgZ(16,"p",4),t._uU(17),t.qZA(),t.TgZ(18,"p",4),t._uU(19),t.qZA(),t.TgZ(20,"p",4),t.TgZ(21,"mat-select",5),t.YNc(22,Ut,2,2,"mat-option",6),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(23,"div",7),t.TgZ(24,"div"),t.TgZ(25,"P"),t._uU(26,"UNIDADES: "),t.qZA(),t._UZ(27,"P"),t.TgZ(28,"P"),t._uU(29,"C\xd3DIGO:"),t.qZA(),t.qZA(),t.TgZ(30,"div"),t.TgZ(31,"p",4),t._uU(32),t.qZA(),t.TgZ(33,"p",4),t._UZ(34,"input",8),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(35,"div",9),t.TgZ(36,"div",10),t.TgZ(37,"div",11),t.TgZ(38,"mat-form-field"),t.TgZ(39,"mat-label"),t._uU(40,"C\xf3digo de la muestra"),t.qZA(),t._UZ(41,"input",12),t.qZA(),t.TgZ(42,"mat-form-field"),t.TgZ(43,"mat-label"),t._uU(44,"Fecha de la toma"),t.qZA(),t._UZ(45,"input",13),t._UZ(46,"mat-datepicker-toggle",14),t._UZ(47,"mat-datepicker",15,16),t.qZA(),t.qZA(),t._UZ(49,"br"),t.TgZ(50,"div",11),t.TgZ(51,"mat-form-field",17),t.TgZ(52,"mat-label"),t._uU(53,"Lectura N\xb01"),t.qZA(),t._UZ(54,"input",18),t.qZA(),t.TgZ(55,"mat-form-field",17),t.TgZ(56,"mat-label"),t._uU(57,"Lectura N\xb02"),t.qZA(),t._UZ(58,"input",19),t.qZA(),t.TgZ(59,"mat-form-field",17),t.TgZ(60,"mat-label"),t._uU(61,"Promedio"),t.qZA(),t._UZ(62,"input",20),t.qZA(),t.qZA(),t._UZ(63,"br"),t.TgZ(64,"div",11),t.TgZ(65,"mat-form-field",21),t.TgZ(66,"mat-label"),t._uU(67,"Observaciones"),t.qZA(),t._UZ(68,"textarea",22),t.qZA(),t.qZA(),t.qZA(),t.TgZ(69,"div",23),t.TgZ(70,"h2"),t._uU(71,"CALIBRACI\xd3N Y CONTROL INSTRUMENTAL"),t.qZA(),t.YNc(72,Ot,28,0,"div",24),t.TgZ(73,"div"),t.TgZ(74,"div",25),t.TgZ(75,"div",26),t.TgZ(76,"p",4),t._uU(77,"ESTANDAR DE VERIFICACI\xd3N"),t.qZA(),t.qZA(),t.TgZ(78,"div",27),t.TgZ(79,"div",11),t.TgZ(80,"mat-form-field"),t.TgZ(81,"mat-label"),t._uU(82,"Valor te\xf3rico"),t.qZA(),t._UZ(83,"input",28),t.qZA(),t.TgZ(84,"mat-form-field"),t.TgZ(85,"mat-label"),t._uU(86,"Valor real"),t.qZA(),t._UZ(87,"input",29),t.qZA(),t.qZA(),t.TgZ(88,"div"),t.TgZ(89,"mat-form-field",30),t.TgZ(90,"mat-label"),t._uU(91,"% Recuperaci\xf3n"),t.qZA(),t._UZ(92,"input",31),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(93,"mat-dialog-actions",32),t.YNc(94,Mt,2,0,"button",33),t.TgZ(95,"button",34),t.NdJ("click",function(){return a.saveOrUpdate()}),t._uU(96),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._uU(97,"--\x3e\n")),2&e){const n=t.MAs(48);t.xp6(1),t.Q6J("formGroup",a.formMicrobiologico),t.xp6(2),t.hij("AN\xc1LISIS DE ",a.analisis.titulo," "),t.xp6(14),t.Oqu(a.analisis.procedimiento),t.xp6(2),t.Oqu(a.analisis.metodo),t.xp6(3),t.Q6J("ngForOf",a.listaEquipoMedicion),t.xp6(10),t.hij(" \xa0 ",a.analisis.unidades,""),t.xp6(13),t.Q6J("matDatepicker",n),t.xp6(1),t.Q6J("for",n),t.xp6(26),t.Q6J("ngIf",!0),t.xp6(22),t.Q6J("ngIf",null!==a.button),t.xp6(2),t.hij(" ",null===a.button?"Guardar":"Actualizar"," ")}},directives:[r._Y,r.JL,r.sg,Y.gD,r.JJ,r.u,A.sg,J.Nt,r.Fj,_.KE,_.hX,b.hl,b.nW,_.R9,b.Mq,r.qQ,r.wV,r.nD,r.Q7,A.O5,c.H8,N.lW,V.ey],styles:['.containerFather[_ngcontent-%COMP%], form[_ngcontent-%COMP%]{margin:auto;width:min-content}P[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{text-align:left;font-family:"Franklin Gothic Medium","Arial Narrow",Arial,sans-serif;color:#27c34a}hr[_ngcontent-%COMP%]{margin-top:-10px;width:50%;height:3px;background-color:#32d555}header[_ngcontent-%COMP%]{margin:auto;width:60%;border:2px solid black;border-radius:30px;display:flex;justify-content:space-around;padding:10px 0 0;background-color:#fff}.left[_ngcontent-%COMP%], .rigth[_ngcontent-%COMP%]{display:flex;align-items:center}.container[_ngcontent-%COMP%]{padding-top:1%;width:100%;margin:auto;display:flex;justify-content:space-around}.form1[_ngcontent-%COMP%], .form2[_ngcontent-%COMP%]{padding:20px;border:2px solid black;border-radius:15px;width:45%}.form2[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#000;text-align:center}.mat-form-field[_ngcontent-%COMP%]{width:45%}.row[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.col3[_ngcontent-%COMP%]{width:30%}.full-width[_ngcontent-%COMP%]{width:100%}.container1[_ngcontent-%COMP%], .container2[_ngcontent-%COMP%]{border:2px solid #636363;margin:0 10px 10px;border-radius:10px;display:flex;justify-content:space-around;padding:10px}p[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;border-bottom:1px solid;background-color:transparent;width:120px;color:#000}.mat-form-field[_ngcontent-%COMP%]{color:#000}button[_ngcontent-%COMP%]{background-color:#27c34a;color:#fff}']}),i})();const j=JSON.parse('{"W":{"Ul":"ALCALINIDAD TOTAL","iy":"PLA-013","xM":"SM 2320 B","SD":"mg/L","aO":"alcalinidad"}}');let Rt=(()=>{class i{constructor(e){this.http=e,this.urlBase=v.N.urlBase}insert(e){return this.http.post(`${this.urlBase}/tqui-analisis-fisico-quimico`,e)}getAnalisisFisicoQuimicos(e,a){return this.http.get(`${this.urlBase}/tqui-analisis-fisico-quimico/${e}/${a}`)}updateAnalisisFisicoQuimicos(e){return this.http.put(`${this.urlBase}/tqui-analisis-fisico-quimico`,e)}getParametrosByAnalisis(e){return this.http.get(`${this.urlBase}/tqui-parametros-analisis-fisico-quimico/${e}`)}deleteAnalisFisicoQuimicos(e){return this.http.delete(`${this.urlBase}/tqui-analisis-fisico-quimico/${e}`)}updateEstadoPenAproCalidad(e){return this.http.get(`${this.urlBase}/tqui-analisis-fisico-quimico/actualizar-estado-pendiente-calidad/${e}`)}aprobarAnalisisCalidad(e,a){return this.http.get(`${this.urlBase}/tqui-analisis-fisico-quimico/aprobar-analisis-calidad/${e}/${a}`)}updateParametroRechazado(e){return this.http.get(`${this.urlBase}/tqui-analisis-fisico-quimico/actualizar-estado-rechazado/${e}`)}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(k.eN))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Et(i,o){if(1&i&&(t.TgZ(0,"mat-option",56),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.Q6J("value",e.nmdato),t.xp6(1),t.hij(" ",e.dsdato," ")}}function Pt(i,o){if(1&i&&(t.TgZ(0,"mat-option",56),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.Q6J("value",e.nmdato),t.xp6(1),t.hij(" ",e.dsdato," ")}}function Dt(i,o){if(1&i&&(t.TgZ(0,"mat-option",56),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.Q6J("value",e.nmdato),t.xp6(1),t.hij(" ",e.dsdato," ")}}function yt(i,o){if(1&i&&(t.TgZ(0,"mat-option",56),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.Q6J("value",e.nmdato),t.xp6(1),t.hij(" ",e.dsdato," ")}}function wt(i,o){if(1&i&&(t.TgZ(0,"mat-option",56),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.Q6J("value",e.nmdato),t.xp6(1),t.hij(" ",e.dsdato," ")}}function St(i,o){1&i&&(t.TgZ(0,"h2",57),t._uU(1,"Pendiente por aporbaci\xf3n de un director t\xe9cnico"),t.qZA())}function Bt(i,o){1&i&&(t.TgZ(0,"h2",57),t._uU(1,"Pendiente por aporbaci\xf3n de un oficial de calidad"),t.qZA())}function Ft(i,o){1&i&&(t.TgZ(0,"h2",58),t._uU(1,"Muestra totalmente aprobada"),t.qZA())}function Lt(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"button",59),t.NdJ("click",function(){return t.CHM(e),t.oxw().saveOrUpdate()}),t._uU(1),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.hij(" ",null===e.button?"Pasar a verificaci\xf3n del director":"Actualizar"," ")}}function Qt(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"button",60),t.NdJ("click",function(){return t.CHM(e),t.oxw().UpdateEstadPenAproCalidad()}),t._uU(2," Aprobar "),t.qZA(),t.TgZ(3,"button",61),t.NdJ("click",function(){return t.CHM(e),t.oxw().updateParametroRechazado()}),t._uU(4," Rechazar "),t.qZA(),t.qZA()}}function Jt(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"button",60),t.NdJ("click",function(){return t.CHM(e),t.oxw().aprobarAnalisis()}),t._uU(2," Aprobar "),t.qZA(),t.TgZ(3,"button",61),t.NdJ("click",function(){return t.CHM(e),t.oxw().updateParametroRechazado()}),t._uU(4," Rechazar "),t.qZA(),t.qZA()}}class E extends class extends class{validarRequired(o,e){"alcalinidad"!==o||e.controls.diluido.addValidators([r.kI.required])}}{constructor(){super(),this.analisis={titulo:"",procedimiento:"",metodo:"",unidades:"",tipo:""}}tipoAnalisis(o,e){if("alcalinidad"===o)return this.validarRequired(o,e),this.analisis.titulo=j.W.Ul,this.analisis.procedimiento=j.W.iy,this.analisis.metodo=j.W.xM,this.analisis.unidades=j.W.SD,this.analisis.tipo=j.W.aO,this.analisis}}{constructor(o,e,a,n,l,m,g){super(),this.fb=o,this.inData=e,this.service=a,this.swetAlert=n,this.auth=l,this.dialogRef=m,this.mailService=g,this.analisis={titulo:"",procedimiento:"",metodo:"",unidades:"",tipo:""},this.listParametro1=[],this.listParametro2=[],this.listParametro3=[],this.listParametro4=[],this.listParametro5=[],this.factorDilucion=0,this.recuperacion=0,this.concentracionDos=0,this.concentracionUno=0,this.concentracionPromedio=0,this.capacidad=[],this.formFisicoQuimicos=this.fb.group({cdunicanalisisfisicoquimicos:[""],cdunimuestra:[""],tipoanalisis:[""],fechacreacion:[""],fechamodificacion:[""],cdestado:[""],cdusuario:[""],equipoTitulacion:["",[r.kI.required]],capacidad:["",[r.kI.required]],metodoTitulacion:["",[r.kI.required]],resolucion:["",[r.kI.required]],codigo:["",[r.kI.required]],deteccionPuntoFinal:["",[r.kI.required]],concentracionTitulante:["",[r.kI.required]],codigoMuestra:["",[r.kI.required]],fechaToma:[new Date,[r.kI.required]],alicuota:["",[r.kI.required]],diluido:["",[r.kI.required]],factorDilucion:[this.factorDilucion,[r.kI.required]],blanco:["",[r.kI.required]],volumen1:["",[r.kI.required]],volumen2:["",[r.kI.required]],concentracion1:["",[r.kI.required]],concentracion2:["",[r.kI.required]],concentracionPromedio:[0,[r.kI.required]],concentracionTeorica:["",[r.kI.required]],concentracionReal:["",[r.kI.required]],recuperacion:["",[r.kI.required]],observaciones:["",[r.kI.required]]}),this.rol=l.getCurrentUser().roles[0].authority,this.formFisicoQuimicos.get("cdusuario").setValue(this.auth.getCurrentUser().email)}ngOnInit(){this.formFisicoQuimicos.valueChanges.subscribe(o=>{this.factorDilucion=o.diluido/o.alicuota,this.recuperacion=o.concentracionReal/o.concentracionTeorica*100,this.concentracionUno=(o.volumen1-o.blanco)*o.concentracionTitulante*5e4/o.diluido*o.factorDilucion,this.concentracionDos=(o.volumen2-o.blanco)*o.concentracionTitulante*5e4/o.diluido*o.factorDilucion,this.concentracionPromedio=(o.concentracion1-o.concentracion2)/2}),this.formFisicoQuimicos.get("codigoMuestra")?.setValue(this.inData.cdcodmuestra),this.analisis=this.tipoAnalisis(this.inData.tipoAnalisis,this.formFisicoQuimicos),this.formFisicoQuimicos.get("cdunimuestra")?.setValue(this.inData.cdunimuestra),this.formFisicoQuimicos.get("tipoanalisis")?.setValue(this.analisis.tipo),this.getParametrosByAnalisis(this.inData.cdmaestro),this.getAnalisisFisicoQuimicos(this.inData.cdunimuestra,this.inData.tipoAnalisis)}getParametrosByAnalisis(o){this.service.getParametrosByAnalisis(o).subscribe(e=>{this.listParametro1=e.parametro1,this.listParametro2=e.parametro2,this.listParametro3=e.parametro3,this.listParametro4=e.parametro4,this.listParametro5=e.parametro5},e=>{s().fire("ERROR","Ha ocurrido un error al obtener el equipo de medici\xf3n","error")})}eliminar(){let o=this.formFisicoQuimicos.get("cdunicanalisisfisicoquimicos")?.value;this.swetAlert.confirmacion(`\xbfDeseas elimnar el an\xe1lisis de ${this.analisis.titulo} de la muestra?`).then(e=>{e.isConfirmed?this.service.deleteAnalisFisicoQuimicos(o).subscribe(a=>{200===a.status&&s().fire(`Se ha eliminado el an\xe1lisis ${this.analisis.titulo} de esta muestra`,"","success"),this.dialogRef.close()},a=>{s().fire("ERROR","Ha ocurrido un error al intentar eliminar el an\xe1lisis","error")}):e.isDenied&&s().fire("Cancelado","","info")})}saveOrUpdate(){null===this.button?this.insert():this.updateAnalisis()}insert(){this.formFisicoQuimicos.invalid?this.swetAlert.warning("Debes diligenciar todo el formulario",""):this.swetAlert.confirmacion("\xbfDeseas pasar este par\xe1metro a verificaci\xf3n del director?").then(o=>{o.isConfirmed&&this.service.insert(this.formFisicoQuimicos.getRawValue()).subscribe(e=>{200===e.status?(this.blockUI.stop(),s().fire(e.message,"","success"),this.dialogRef.close()):(s().fire("",e.message,"error"),this.blockUI.stop(),this.dialogRef.close())},e=>{s().fire("ERROR","Error al agregar el an\xe1lisis","error")})})}updateAnalisis(){this.formFisicoQuimicos.invalid?this.swetAlert.warning("Debes diligenciar todo el formulario",""):this.swetAlert.confirmacion("\xbfDeseas actualizar el an\xe1lisis?").then(o=>{o.isConfirmed?this.service.updateAnalisisFisicoQuimicos(this.formFisicoQuimicos.getRawValue()).subscribe(e=>{200===e.status&&(this.dialogRef.close(),s().fire(e.message,"","success"))},e=>{s().fire("ERROR","Error al actualizar el an\xe1lisis","error")}):o.isDenied&&s().fire("Cancelado","","info")})}UpdateEstadPenAproCalidad(){this.swetAlert.confirmacion("Una vez aprobada este an\xe1lisis pasar\xe1 a verificaci\xf3n por un oficial de calidad").then(o=>{o.isConfirmed&&(this.blockUI.start("Cargando..."),this.service.updateEstadoPenAproCalidad(this.formFisicoQuimicos.get("cdunicanalisisfisicoquimicos").value).subscribe(e=>{200==e.status?(this.blockUI.stop(),s().fire(e.message,"","success"),this.dialogRef.close()):(this.blockUI.stop(),s().fire("",e.message,"error"),this.dialogRef.close())}))})}getAnalisisFisicoQuimicos(o,e){this.blockUI.start("Cargando..."),this.service.getAnalisisFisicoQuimicos(o,e).subscribe(a=>{if(200==a.status){if(null===a.data)return this.button=null,void this.blockUI.stop();this.estadoParametro=a.data.cdestado,this.formFisicoQuimicos.setValue(a.data),this.formFisicoQuimicos.get("fechaToma")?.setValue(a.data.fechaToma+"T00:00:00"),this.blockUI.stop()}else this.blockUI.stop(),s().fire("",a.message,"error")},a=>{s().fire("ERROR","Ha ocurrido un error","error")})}aprobarAnalisis(){let o=this.formFisicoQuimicos.get("cdunicanalisisfisicoquimicos").value,e=this.formFisicoQuimicos.get("cdunimuestra").value;this.swetAlert.confirmacion("\xbfDeseas aprobar este an\xe1lisis?").then(a=>{a.isConfirmed&&(this.blockUI.start("Cargando..."),this.service.aprobarAnalisisCalidad(o,e).subscribe(n=>{200==n.status?(this.blockUI.stop(),s().fire(n.message,"","success"),this.dialogRef.close()):(this.blockUI.stop(),s().fire("",n.message,"error"),this.dialogRef.close())}))})}updateParametroRechazado(){let o=this.formFisicoQuimicos.get("cdunicanalisisfisicoquimicos").value;this.swetAlert.confirmacion("\xbfDeseas rechazar este an\xe1lisis?").then(e=>{e.isConfirmed&&this.service.updateParametroRechazado(o).subscribe(a=>{this.blockUI.start("Rechazando..."),200==a.status?(this.blockUI.stop(),this.dialogRef.close(),s().fire("",a.message,"success"),this.mailService.sendMailAnalisisFisicQuimicos(a.data).subscribe(n=>{s().fire("",n.message,"success")})):(this.blockUI.stop(),s().fire("",a.message,"error"),this.dialogRef.close())},a=>{this.blockUI.stop(),this.dialogRef.close(),s().fire("",a,"error")})})}}E.\u0275fac=function(o){return new(o||E)(t.Y36(r.qu),t.Y36(c.WI),t.Y36(Rt),t.Y36(I.o),t.Y36(F.e),t.Y36(c.so),t.Y36(tt.Y))},E.\u0275cmp=t.Xpm({type:E,selectors:[["app-fisico-quimico"]],features:[t.qOj],decls:153,vars:24,consts:[["mat-dialog-close","","mat-icon-button","","matTooltip","Cerrar","matTooltipPosition","left",1,"close",2,"float","rigth"],[1,"containerFather"],[3,"formGroup"],[2,"text-align","center"],[2,"display","flex"],["aria-describedby","se uso la tabla para mayor orden",2,"margin","0 auto"],[1,"verde"],[1,"negro"],["formControlName","equipoTitulacion",2,"border","none","border-bottom","1px solid","background-color","transparent","width","130px"],[3,"value",4,"ngFor","ngForOf"],["formControlName","resolucion",2,"border","none","border-bottom","1px solid","background-color","transparent","width","130px"],["formControlName","capacidad",2,"border","none","border-bottom","1px solid","background-color","transparent","width","130px"],["maxlength","20","matInput","","formControlName","codigo",2,"border","none","border-bottom","1px solid","background-color","transparent","width","130px"],["formControlName","metodoTitulacion",2,"border","none","border-bottom","1px solid","background-color","transparent","width","130px"],["formControlName","deteccionPuntoFinal",2,"border","none","border-bottom","1px solid","background-color","transparent","width","130px"],[2,"display","flex","margin","8px 0 8px 0"],[2,"margin","0 auto"],["matInput","","formControlName","concentracionTitulante",2,"border","none","border-bottom","1px solid","background-color","transparent","width","150px"],[1,"estandard"],["matInput","","readonly","","formControlName","codigoMuestra"],["matInput","","formControlName","fechaToma",3,"matDatepicker"],["matSuffix","",3,"for"],["touchUi",""],["picker",""],[1,"form"],[1,"row"],[1,"col5"],["matInput","","type","number","formControlName","diluido"],["matInput","","type","number","formControlName","alicuota"],["matInput","","readonly","","type","number","formControlName","factorDilucion",3,"ngModel","ngModelChange"],["matInput","","type","number","formControlName","blanco"],["matInput","","type","number","formControlName","volumen1"],[1,"col4"],["matInput","","type","number","formControlName","volumen2"],["matInput","","readonly","","type","number","formControlName","concentracion1",3,"ngModel","ngModelChange"],["matInput","","readonly","","type","number","formControlName","concentracion2",3,"ngModel","ngModelChange"],["matInput","","readonly","","type","number","formControlName","concentracionPromedio",3,"ngModel","ngModelChange"],[1,"container"],[1,"form1"],[1,"container1"],[2,"text-align","center","margin-bottom","0"],["matInput","","type","number","formControlName","concentracionTeorica"],["matInput","","type","number","formControlName","concentracionReal"],[1,"full-width"],["matInput","","readonly","","type","number","formControlName","recuperacion",3,"ngModel","ngModelChange"],[1,"form2"],[1,"container2"],["appearance","outline",1,"full-width"],["matInput","","maxlength","255","required","","formControlName","observaciones",2,"height","80px"],["message",""],["align","end"],["align","center"],["style","text-align: center; color: red;",4,"ngIf"],["style","text-align: center; color: green;",4,"ngIf"],["mat-button","","type","submit","class","boton",3,"click",4,"ngIf"],[4,"ngIf"],[3,"value"],[2,"text-align","center","color","red"],[2,"text-align","center","color","green"],["mat-button","","type","submit",1,"boton",3,"click"],["mat-button","",1,"boton",3,"click"],["color","warn","mat-raised-button","",3,"click"]],template:function(o,e){if(1&o&&(t.TgZ(0,"button",0),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA(),t.qZA(),t.TgZ(3,"div",1),t.TgZ(4,"form",2),t.TgZ(5,"h2",3),t._uU(6),t.qZA(),t._UZ(7,"hr"),t.TgZ(8,"header"),t.TgZ(9,"div",4),t.TgZ(10,"table",5),t._UZ(11,"th"),t.TgZ(12,"tr"),t.TgZ(13,"td",6),t._uU(14,"PROCEDIMIENTO N\xb0:"),t.qZA(),t.TgZ(15,"td",7),t._uU(16),t.qZA(),t.TgZ(17,"td",6),t._uU(18,"EQUIPO DE TITULACI\xd3N:"),t.qZA(),t.TgZ(19,"td",7),t.TgZ(20,"mat-select",8),t.YNc(21,Et,2,2,"mat-option",9),t.qZA(),t.qZA(),t.TgZ(22,"td",6),t._uU(23,"RESOLUCI\xd3N:"),t.qZA(),t.TgZ(24,"td",7),t.TgZ(25,"mat-select",10),t.YNc(26,Pt,2,2,"mat-option",9),t.qZA(),t.qZA(),t.qZA(),t.TgZ(27,"tr"),t.TgZ(28,"td",6),t._uU(29,"UNIDADES:"),t.qZA(),t.TgZ(30,"td",7),t._uU(31),t.qZA(),t.TgZ(32,"td",6),t._uU(33,"CAPACIDAD (mL):"),t.qZA(),t.TgZ(34,"td",7),t.TgZ(35,"mat-select",11),t.YNc(36,Dt,2,2,"mat-option",9),t.qZA(),t.qZA(),t.TgZ(37,"td",6),t._uU(38,"C\xd3DIGO:"),t.qZA(),t.TgZ(39,"td",7),t._UZ(40,"input",12),t.qZA(),t.qZA(),t.TgZ(41,"tr"),t.TgZ(42,"td",6),t._uU(43,"M\xc9TODO:"),t.qZA(),t.TgZ(44,"td",7),t._uU(45),t.qZA(),t.TgZ(46,"td",6),t._uU(47,"M\xc9TODO DE TITULACI\xd3N:"),t.qZA(),t.TgZ(48,"td"),t.TgZ(49,"mat-select",13),t.YNc(50,yt,2,2,"mat-option",9),t.qZA(),t.qZA(),t.TgZ(51,"td",6),t._uU(52,"DETECCI\xd3N PUNTO FINAL:"),t.qZA(),t.TgZ(53,"td"),t.TgZ(54,"mat-select",14),t.YNc(55,wt,2,2,"mat-option",9),t.qZA(),t.qZA(),t.qZA(),t.TgZ(56,"tr"),t._UZ(57,"td"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(58,"div",15),t.TgZ(59,"div",16),t.TgZ(60,"td",6),t._uU(61,"CONCENTRACI\xd3N TITULANTE ESTANDARIZADO"),t.qZA(),t.TgZ(62,"td",7),t._UZ(63,"input",17),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(64,"br"),t.TgZ(65,"div",18),t.TgZ(66,"mat-form-field"),t.TgZ(67,"mat-label"),t._uU(68,"C\xf3digo de la muestra"),t.qZA(),t._UZ(69,"input",19),t.qZA(),t.TgZ(70,"mat-form-field"),t.TgZ(71,"mat-label"),t._uU(72,"Fecha de la toma"),t.qZA(),t._UZ(73,"input",20),t._UZ(74,"mat-datepicker-toggle",21),t._UZ(75,"mat-datepicker",22,23),t.qZA(),t.qZA(),t.TgZ(77,"div",24),t.TgZ(78,"div",25),t.TgZ(79,"mat-form-field",26),t.TgZ(80,"mat-label"),t._uU(81,"Diluido A"),t.qZA(),t._UZ(82,"input",27),t.qZA(),t.TgZ(83,"mat-form-field",26),t.TgZ(84,"mat-label"),t._uU(85,"Alicuota"),t.qZA(),t._UZ(86,"input",28),t.qZA(),t.TgZ(87,"mat-form-field",26),t.TgZ(88,"mat-label"),t._uU(89,"Factor de diluci\xf3n"),t.qZA(),t.TgZ(90,"input",29),t.NdJ("ngModelChange",function(n){return e.factorDilucion=n}),t.qZA(),t.qZA(),t.TgZ(91,"mat-form-field",26),t.TgZ(92,"mat-label"),t._uU(93,"Blanco (mL)"),t.qZA(),t._UZ(94,"input",30),t.qZA(),t.TgZ(95,"mat-form-field",26),t.TgZ(96,"mat-label"),t._uU(97,"Volumen N\xb01"),t.qZA(),t._UZ(98,"input",31),t.qZA(),t.qZA(),t.TgZ(99,"div",25),t.TgZ(100,"mat-form-field",32),t.TgZ(101,"mat-label"),t._uU(102,"Volumen N\xb02 "),t.qZA(),t._UZ(103,"input",33),t.qZA(),t.TgZ(104,"mat-form-field",32),t.TgZ(105,"mat-label"),t._uU(106,"Concentraci\xf3n N\xb01"),t.qZA(),t.TgZ(107,"input",34),t.NdJ("ngModelChange",function(n){return e.concentracionUno=n}),t.qZA(),t.qZA(),t.TgZ(108,"mat-form-field",32),t.TgZ(109,"mat-label"),t._uU(110,"Concentraci\xf3n N\xb02"),t.qZA(),t.TgZ(111,"input",35),t.NdJ("ngModelChange",function(n){return e.concentracionDos=n}),t.qZA(),t.qZA(),t.TgZ(112,"mat-form-field",32),t.TgZ(113,"mat-label"),t._uU(114,"Concentraci\xf3n promedio "),t.qZA(),t.TgZ(115,"input",36),t.NdJ("ngModelChange",function(n){return e.concentracionPromedio=n}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(116,"div",37),t.TgZ(117,"div",38),t.TgZ(118,"div",39),t.TgZ(119,"h3",40),t._uU(120,"CONTROL DE CALIDAD ANAL\xcdTICA"),t.qZA(),t.TgZ(121,"div"),t.TgZ(122,"div",25),t.TgZ(123,"mat-form-field"),t.TgZ(124,"mat-label"),t._uU(125,"Concentraci\xf3n te\xf3rico"),t.qZA(),t._UZ(126,"input",41),t.qZA(),t.TgZ(127,"mat-form-field"),t.TgZ(128,"mat-label"),t._uU(129,"Concentraci\xf3n real"),t.qZA(),t._UZ(130,"input",42),t.qZA(),t.qZA(),t.TgZ(131,"div"),t.TgZ(132,"mat-form-field",43),t.TgZ(133,"mat-label"),t._uU(134,"% Recuperaci\xf3n"),t.qZA(),t.TgZ(135,"input",44),t.NdJ("ngModelChange",function(n){return e.recuperacion=n}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(136,"div",45),t.TgZ(137,"div",46),t.TgZ(138,"div",25),t.TgZ(139,"mat-form-field",47),t.TgZ(140,"mat-label"),t._uU(141,"Observaciones"),t.qZA(),t._UZ(142,"textarea",48,49),t.TgZ(144,"mat-hint",50),t._uU(145),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(146,"mat-dialog-actions",51),t.YNc(147,St,2,0,"h2",52),t.YNc(148,Bt,2,0,"h2",52),t.YNc(149,Ft,2,0,"h2",53),t.YNc(150,Lt,2,1,"button",54),t.YNc(151,Qt,5,0,"span",55),t.YNc(152,Jt,5,0,"span",55),t.qZA(),t.qZA(),t.qZA()),2&o){const a=t.MAs(76),n=t.MAs(143);t.xp6(4),t.Q6J("formGroup",e.formFisicoQuimicos),t.xp6(2),t.hij("AN\xc1LISIS DE ",e.analisis.titulo," "),t.xp6(10),t.Oqu(e.analisis.procedimiento),t.xp6(5),t.Q6J("ngForOf",e.listParametro1),t.xp6(5),t.Q6J("ngForOf",e.listParametro3),t.xp6(5),t.Oqu(e.analisis.unidades),t.xp6(5),t.Q6J("ngForOf",e.listParametro2),t.xp6(9),t.Oqu(e.analisis.metodo),t.xp6(5),t.Q6J("ngForOf",e.listParametro4),t.xp6(5),t.Q6J("ngForOf",e.listParametro5),t.xp6(18),t.Q6J("matDatepicker",a),t.xp6(1),t.Q6J("for",a),t.xp6(16),t.Q6J("ngModel",e.factorDilucion),t.xp6(17),t.Q6J("ngModel",e.concentracionUno),t.xp6(4),t.Q6J("ngModel",e.concentracionDos),t.xp6(4),t.Q6J("ngModel",e.concentracionPromedio),t.xp6(20),t.Q6J("ngModel",e.recuperacion),t.xp6(10),t.hij("",n.value.length," / 255"),t.xp6(2),t.Q6J("ngIf","ROLE_DIRECTOR"!=e.rol&&43==e.estadoParametro),t.xp6(1),t.Q6J("ngIf","ROLE_QUIALITY"!=e.rol&&44==e.estadoParametro),t.xp6(1),t.Q6J("ngIf",45==e.estadoParametro),t.xp6(1),t.Q6J("ngIf",36!=e.inData.cdestadomuestra&&"ROLE_ANALYST"==e.rol&&(42==e.estadoParametro||null==e.estadoParametro)),t.xp6(1),t.Q6J("ngIf","ROLE_DIRECTOR"==e.rol&&43==e.estadoParametro),t.xp6(1),t.Q6J("ngIf","ROLE_QUIALITY"==e.rol&&44==e.estadoParametro)}},directives:[N.lW,c.ZT,L.gM,Q.Hw,r._Y,r.JL,r.sg,Y.gD,r.JJ,r.u,A.sg,J.Nt,r.Fj,r.nD,_.KE,_.hX,b.hl,b.nW,_.R9,b.Mq,r.wV,r.Q7,_.bx,c.H8,A.O5,V.ey],styles:['.containerFather[_ngcontent-%COMP%]{margin:auto;width:min-content}.verde[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{margin-bottom:0;text-align:left;font-family:"Franklin Gothic Medium","Arial Narrow",Arial,sans-serif;color:#27c34a}.negro[_ngcontent-%COMP%]{color:#000}td[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}hr[_ngcontent-%COMP%]{margin:10px auto;width:65%;height:4px;background-color:#32d555}header[_ngcontent-%COMP%]{width:100%;border:2px solid black;border-radius:30px;justify-content:space-around;padding:10px 0 0;background-color:#fff}.container[_ngcontent-%COMP%]{padding-top:1%;display:flex;justify-content:space-around}.form[_ngcontent-%COMP%]{padding:20px;border:2px solid black;border-radius:15px}.form2[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#000;text-align:center}.form2[_ngcontent-%COMP%], .form1[_ngcontent-%COMP%]{width:100%}.mat-form-field[_ngcontent-%COMP%]{width:45%}.row[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.estandard[_ngcontent-%COMP%]{width:45%;margin:0 auto;display:flex;justify-content:space-between}.col5[_ngcontent-%COMP%]{width:18%}.col4[_ngcontent-%COMP%]{width:23%}.full-width[_ngcontent-%COMP%]{width:100%}.container1[_ngcontent-%COMP%], .container2[_ngcontent-%COMP%]{border:2px solid #636363;margin:0 10px 10px;border-radius:10px;padding:10px}p[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;border-bottom:1px solid;background-color:transparent;width:120px;color:#000}.mat-form-field[_ngcontent-%COMP%]{color:#000}button[_ngcontent-%COMP%]{background-color:#27c34a;color:#fff}']}),(0,T.gn)([(0,f.bH)()],E.prototype,"blockUI",void 0);var et=u(5939),Yt=u(7539);function Vt(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"form",104),t.TgZ(1,"mat-checkbox",105),t.NdJ("change",function(){return t.CHM(e),t.oxw(2).checkInformativo()}),t._uU(2,"Por Radicar"),t.qZA(),t.TgZ(3,"mat-checkbox",106),t.NdJ("change",function(){return t.CHM(e),t.oxw(2).checkInformativo()}),t._uU(4,"Radicado"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("formGroup",e.checkInfo)}}function $t(i,o){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,Vt,5,1,"form",103),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",!e.isEdit)}}function jt(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"button",107),t.NdJ("click",function(){return t.CHM(e),t.oxw().pasaraRadicacion()}),t._uU(1," Pasar a radicaci\xf3n "),t.qZA()}}function Ht(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"button",108),t.NdJ("click",function(){return t.CHM(e),t.oxw().modificarParametros()}),t._uU(1," Modificar par\xe1metros "),t.qZA()}}class P{constructor(o,e,a,n,l,m,g){this.sweeAlert=o,this.muestraService=e,this.inData=n,this.dialogRef=l,this.dialog=m,this.auth=g,this.isVisible=!1,this.checkBoxsCompare={},this.parambasico={cdunimuestra:"",cdcodmuestra:"",tipoAnalisis:""},this.parentMessage="message from parent",this.isEdit=!1,this.checkBoxs=a.group({ph:!1,conductividad:!1,coloraparente:!1,colorreal:!1,colortriestimulo:!1,turbidez:!1,olor:!1,sabor:!1,temperatura:!1,acidez:!1,alcalinidad:!1,cloruros:!1,durezat:!1,durezac:!1,fluoruros:!1,salinidad:!1,solidost:!1,solidoss:!1,solidosd:!1,solidossedi:!1,potencialoxido:!1,clororesidual:!1,monocloramina:!1,dicloramina:!1,tricloruronitro:!1,nitrogenot:!1,nitrogenoorga:!1,nitrogenoamoni:!1,fosforot:!1,fosforoortof:!1,fosfatos:!1,nitrogenonitrato:!1,nitratos:!1,nitrogenonitritos:!1,nitritos:!1,sulfatos:!1,sustanciasac:!1,hierrofenantrolina:!1,grasaaceite:!1,oxigenodisuelto:!1,demandaquimica:!1,demandabioquimica:!1,cianurototal:!1,plata:!1,aluminio:[!1],oro:!1,bario:!1,berilio:!1,bismuto:!1,calcio:!1,cadmio:!1,cobalto:!1,cromo:!1,cesio:!1,cobre:!1,hierro:!1,iridio:!1,potasio:!1,litio:!1,magnesio:!1,manganeso:!1,molibdeno:!1,sodio:!1,niquel:!1,osmio:!1,plomo:!1,platino:!1,antimonio:!1,silicio:!1,estano:!1,titanio:!1,vanadio:!1,cinc:!1,arsenico:!1,mercurio:!1,coliformesfecales:!1,ecoli:!1,microbiologico:!1,hidrocarburostotales:!1,hidrocarburosaromaticos:!1,btex:!1,aox:!1,fenolest:!1}),this.controlsCheckBox=Object.keys(this.checkBoxs.value),this.checkInfo=a.group({checkuno:!1,checkdos:!0}),this.rol=g.getCurrentUser().roles[0].authority}ngOnInit(){this.getAnalisisAsociadosMuestra()}getAnalisisAsociadosMuestra(){let o=Object.keys(this.checkBoxs.value);this.muestraService.getAnalisisAsociadosMuestra(this.inData.cdunimuestra).subscribe(e=>{if(200==e.status){if(e.data){this.arrayChecked=e.data;for(let a in o)for(let n in this.arrayChecked){if(this.colors(this.arrayChecked[n].cdestado),this.checkBoxs.get(o[a]).enable(!0),o[a]===this.arrayChecked[n].tipoanalisis)break;this.checkBoxs.get(o[a]).disable(!0)}this.analisisTerminadosBymuestra()}}else this.blockUI.stop(),this.dialogRef.close(),s().fire("",`${e.message}`,"error")},e=>{s().fire("ERROR","Ha ocurrido un error al intentar obtener los par\xe1metros de an\xe1lisis de la muestra","error")})}analisisTerminadosBymuestra(){this.blockUI.start("Cargando..."),this.muestraService.getAnalisisTerminadosBymuestra(this.inData.cdunimuestra).subscribe(o=>{if(200==o.status){let e=o.data,a=Object.keys(this.checkBoxs.value);this.arrayTotalesAnalisis=e;for(let n in a){0==e.length&&this.checkBoxs.get(a[n]).setValue(!1);for(let l in e){if(a[n]===e[l]){this.checkBoxs.get(a[n]).setValue(!0);break}this.checkBoxs.get(a[n]).setValue(!1)}}this.blockUI.stop()}else this.blockUI.stop(),this.dialogRef.close(),s().fire("",`${o.message}`,"error")},o=>{s().fire("ERROR","Ha ocurrido un error al obtener los parametros de an\xe1lisis registrados","error"),this.dialogRef.close()})}openAnalisisBasicos(o,e,a){let n,l=this.inData.cdunimuestra,m=this.inData.cdcodmuestra,g=this.inData.cdestado;if(34!=this.inData.cdestado&&!this.isEdit){if(this.arrayChecked&&(n=this.arrayChecked.find(h=>h.tipoanalisis==o),42==n.cdestado&&"ROLE_ANALYST"!=this.rol))return s().fire("","<b>Esta muestra se encuentra en proceso de custodia</b>","info"),void this.checkBoxs.get(n.tipoanalisis).setValue(!1);if(0!=this.arrayChecked.length)for(let h of this.arrayChecked)if(h.tipoanalisis==o){this.dialog.open(R,{data:{cdunimuestra:l,cdcodmuestra:m,tipoAnalisis:o,cdmaestro:e,cdestadomuestra:g},width:"100%"}).afterClosed().subscribe(()=>{this.getAnalisisAsociadosMuestra()});break}}}openAnalisisMicroBio(o,e,a){let n,l=this.inData.cdunimuestra,m=this.inData.cdcodmuestra,g=this.inData.cdestado;if(this.arrayChecked&&(n=this.arrayChecked.find(h=>h.tipoanalisis==o),console.log(n),42==n.cdestado&&"ROLE_ANALYST"!=this.rol))return s().fire("","<b>Esta muestra se encuentra en proceso de custodia</b>","info"),void this.checkBoxs.get(n.tipoanalisis).setValue(!1);if(34!=this.inData.cdestado&&!this.isEdit&&0!=this.arrayChecked.length)for(let h of this.arrayChecked)if(h.tipoanalisis==o){this.dialog.open(xt,{data:{cdunimuestra:l,cdcodmuestra:m,tipoAnalisis:o,cdmaestro:e,cdestadomuestra:g},width:"100%"}).afterClosed().subscribe(()=>{this.getAnalisisAsociadosMuestra()});break}}openAnalisisFisicoQuimico(o,e,a){let n,l=this.inData.cdunimuestra,m=this.inData.cdcodmuestra,g=this.inData.cdestado;if(this.arrayChecked&&(n=this.arrayChecked.find(h=>h.tipoanalisis==o),console.log(n),42==n.cdestado&&"ROLE_ANALYST"!=this.rol))return s().fire("","<b>Esta muestra se encuentra en proceso de custodia</b>","info"),void this.checkBoxs.get(n.tipoanalisis).setValue(!1);if(34!=this.inData.cdestado&&!this.isEdit&&0!=this.arrayChecked.length)for(let h of this.arrayChecked)if(h.tipoanalisis==o){this.dialog.open(E,{data:{cdunimuestra:l,cdcodmuestra:m,tipoAnalisis:o,cdmaestro:e,cdestadomuestra:g},width:"100%"}).afterClosed().subscribe(()=>{this.getAnalisisAsociadosMuestra()});break}}pasaraRadicacion(){this.sweeAlert.confirmacion("\xbfDeseas agregar los par\xe1metros seleccionados a la muestra?").then(o=>{o.isConfirmed&&(this.blockUI.start("Agregando par\xe1metros..."),this.muestraService.asociarAnalisisAMuestra(this.generateObject()).subscribe(e=>{200==e.status?(s().fire(e.message,"","success"),this.dialogRef.close({rta:e}),this.blockUI.stop()):(this.blockUI.stop(),s().fire("",`${e.message}`,"error"))},e=>{this.blockUI.stop(),s().fire("ERROR","Error al asociar par\xe1metros a la muestra","error")}))})}generateObject(){let o="";for(let e in this.checkBoxs.value)!0===this.checkBoxs.value[e]&&(o+=e+",");return{cdunimuestra:this.inData.cdunimuestra,dsparametrosanalisis:o.slice(0,o.length-1)}}finalizarRadicacion(){this.arrayChecked.length==this.arrayTotalesAnalisis.length?this.sweeAlert.confirmacion("\xbfEsta muestra pasar\xe1 a un estado de verificaci\xf3n, desea finalizar el proceso?").then(o=>{o.isConfirmed&&this.muestraService.updateEstadoPentAprobar(this.inData).subscribe(e=>{200==e.status?(s().fire(e.message,"","success"),this.dialogRef.close({rta:e})):(this.blockUI.stop(),s().fire("",`<b>${e.message}</b>`,"error"))},()=>{this.blockUI.stop(),s().fire("","<b>Ha ocurrido un error al intentar finalizar el procedimiento</b>","error")})}):s().fire("","<b>A\xfan faltan par\xe1metros por radicar</b>","warning")}checkInformativo(){this.checkInfo.get("checkuno").setValue(!1),this.checkInfo.get("checkdos").setValue(!0)}modificarParametros(){for(let o in this.controlsCheckBox){this.checkBoxs.get(this.controlsCheckBox[o]).enable();for(let e in this.arrayChecked)if(this.arrayChecked[o]===this.controlsCheckBox[e]){this.checkBoxs.get(this.arrayChecked[o].tipoanalisis).setValue(!0);break}}this.isEdit=!0}colors(o){42==o&&(this.color="primary"),43==o&&(this.color="accent"),44==o&&(this.color="warn")}}P.\u0275fac=function(o){return new(o||P)(t.Y36(I.o),t.Y36(U),t.Y36(r.qu),t.Y36(c.WI),t.Y36(c.so),t.Y36(c.uw),t.Y36(F.e))},P.\u0275cmp=t.Xpm({type:P,selectors:[["app-analisis-proceso"]],decls:287,vars:4,consts:[["mat-dialog-close","","mat-icon-button","","matTooltip","Cerrar","matTooltipPosition","left",1,"close"],[1,"containerFather"],[1,"container"],[3,"formGroup"],["backgroundColor","accent","mat-align-tabs","center"],["label","B\xc1SICOS"],[1,"basicos",2,"display","flex","justify-content","space-around","padding","auto"],["formControlName","ph",1,"check",3,"change"],["formControlName","conductividad",1,"check",3,"change"],["formControlName","coloraparente",1,"check",3,"change"],["formControlName","colorreal",1,"check",3,"change"],["formControlName","colortriestimulo",1,"check",3,"change"],["formControlName","turbidez",1,"check",3,"change"],["formControlName","olor",1,"check",3,"change"],["formControlName","sabor",1,"check",3,"change"],["formControlName","temperatura",1,"check",3,"change"],["label","CROMATOGR\xc1FICO"],[1,"cromatografico",2,"display","flex","justify-content","space-around"],["formControlName","hidrocarburostotales",1,"check"],["formControlName","hidrocarburosaromaticos",1,"check"],["formControlName","btex",1,"check"],["formControlName","aox",1,"check"],["formControlName","fenolest",1,"check"],["label","F\xcdSICO - QU\xcdMICOS"],[1,"fisicoquimicos"],[2,"display","flex","justify-content","space-around","padding-top","20px"],["formControlName","acidez",1,"check"],["formControlName","alcalinidad",1,"check",3,"change"],["formControlName","cloruros",1,"check"],["formControlName","durezat",1,"check"],["formControlName","durezac",1,"check"],["formControlName","fluoruros",1,"check"],["formControlName","salinidad",1,"check"],["formControlName","solidost",1,"check"],["formControlName","solidosd",1,"check"],["formControlName","solidossedi",1,"check"],["formControlName","potencialoxido",1,"check"],["formControlName","clororesidual",1,"check"],["formControlName","monocloramina",1,"check"],["formControlName","dicloramina",1,"check"],["formControlName","tricloruronitro",1,"check"],["formControlName","nitrogenot",1,"check"],["formControlName","nitrogenoorga",1,"check"],["formControlName","nitrogenoamoni",1,"check"],["formControlName","fosforot",1,"check"],["formControlName","fosforoortof",1,"check"],["formControlName","nitrogenonitrato",1,"check"],["formControlName","nitratos",1,"check"],["formControlName","nitrogenonitritos",1,"check"],["formControlName","nitritos",1,"check"],["formControlName","sulfatos",1,"check"],["formControlName","sustanciasac",1,"check"],["formControlName","hierrofenantrolina",1,"check"],["formControlName","grasaaceite",1,"check"],["formControlName","oxigenodisuelto",1,"check"],["formControlName","demandaquimica",1,"check"],["formControlName","demandabioquimica",1,"check"],["formControlName","cianurototal",1,"check"],["label","METALES"],[1,"metales","mat-elevation-z4"],[2,"display","flex","justify-content","space-around","padding-top","70px"],["formControlName","plata",1,"check"],["formControlName","aluminio",1,"check"],["formControlName","oro",1,"check"],["formControlName","bario",1,"check"],["formControlName","berilio",1,"check"],["formControlName","bismuto",1,"check"],["formControlName","calcio",1,"check"],["formControlName","cadmio",1,"check"],["formControlName","cobalto",1,"check"],["formControlName","cromo",1,"check"],["formControlName","cesio",1,"check"],["formControlName","cobre",1,"check"],["formControlName","hierro",1,"check"],["formControlName","iridio",1,"check"],["formControlName","potasio",1,"check"],["formControlName","litio",1,"check"],["formControlName","magnesio",1,"check"],["formControlName","manganeso",1,"check"],["formControlName","molibdeno",1,"check"],["formControlName","sodio",1,"check"],["formControlName","niquel",1,"check"],["formControlName","osmio",1,"check"],["formControlName","plomo",1,"check"],["formControlName","platino",1,"check"],["formControlName","antimonio",1,"check"],["formControlName","silicio",1,"check"],["formControlName","estano",1,"check"],["formControlName","vanadio",1,"check"],["formControlName","cinc",1,"check"],["formControlName","arsenico",1,"check"],["formControlName","mercurio",1,"check"],["label","MICROBIOL\xd3GICO"],[1,"microbiologico",2,"display","flex","justify-content","space-around","padding","auto"],["formControlName","coliformesfecales",1,"check"],["formControlName","ecoli",1,"check"],["aria-describedby","tabla",2,"width","100%"],[2,"width","100%"],[2,"width","33.33%"],[4,"ngIf"],[2,"width","33.33%","text-align","center"],["mat-button","",3,"click",4,"ngIf"],["class","boton","mat-button","",3,"click",4,"ngIf"],["style","display: flex; flex-direction:column ;",3,"formGroup",4,"ngIf"],[2,"display","flex","flex-direction","column",3,"formGroup"],["formControlName","checkuno",3,"change"],["formControlName","checkdos",1,"check",3,"change"],["mat-button","",3,"click"],["mat-button","",1,"boton",3,"click"]],template:function(o,e){1&o&&(t.TgZ(0,"button",0),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA(),t.qZA(),t.TgZ(3,"div",1),t.TgZ(4,"h1"),t._uU(5,"PAR\xc1METROS DE AN\xc1LISIS "),t.TgZ(6,"mat-icon"),t._uU(7,"query_stats"),t.qZA(),t.qZA(),t._UZ(8,"hr"),t.TgZ(9,"div",2),t.TgZ(10,"form",3),t.TgZ(11,"mat-tab-group",4),t.TgZ(12,"mat-tab",5),t.TgZ(13,"div",6),t.TgZ(14,"div"),t.TgZ(15,"p"),t.TgZ(16,"mat-checkbox",7),t.NdJ("change",function(n){return e.openAnalisisBasicos("ph","5",n.checked)}),t._uU(17,"Ph"),t.qZA(),t.qZA(),t.TgZ(18,"p"),t.TgZ(19,"mat-checkbox",8),t.NdJ("change",function(n){return e.openAnalisisBasicos("conductividad","6",n.checked)}),t._uU(20," CONDUCTIVIDAD EL\xc9CTRICA"),t.qZA(),t.qZA(),t.TgZ(21,"p"),t.TgZ(22,"mat-checkbox",9),t.NdJ("change",function(n){return e.openAnalisisBasicos("coloraparente","8",n.checked)}),t._uU(23,"COLOR APARENTE"),t.qZA(),t.qZA(),t.TgZ(24,"p"),t.TgZ(25,"mat-checkbox",10),t.NdJ("change",function(n){return e.openAnalisisBasicos("colorreal","7",n.checked)}),t._uU(26," COLOR REAL "),t.qZA(),t.qZA(),t.TgZ(27,"p"),t.TgZ(28,"mat-checkbox",11),t.NdJ("change",function(n){return e.openAnalisisBasicos("colortriestimulo","",n.checked)}),t._uU(29,"COLOR TRIEST\xcdMULO"),t.qZA(),t.qZA(),t.TgZ(30,"p"),t.TgZ(31,"mat-checkbox",12),t.NdJ("change",function(n){return e.openAnalisisBasicos("turbidez","9",n.checked)}),t._uU(32," TURBIDEZ "),t.qZA(),t.qZA(),t.TgZ(33,"p"),t.TgZ(34,"mat-checkbox",13),t.NdJ("change",function(n){return e.openAnalisisBasicos("olor","",n.checked)}),t._uU(35,"OLOR "),t.qZA(),t.qZA(),t.TgZ(36,"p"),t.TgZ(37,"mat-checkbox",14),t.NdJ("change",function(n){return e.openAnalisisBasicos("sabor","",n.checked)}),t._uU(38,"SABOR "),t.qZA(),t.qZA(),t.TgZ(39,"p"),t.TgZ(40,"mat-checkbox",15),t.NdJ("change",function(n){return e.openAnalisisBasicos("temperatura","",n.checked)}),t._uU(41," TEMPERATURA \xb0C"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(42,"mat-tab",16),t.TgZ(43,"div",17),t.TgZ(44,"div"),t.TgZ(45,"p"),t.TgZ(46,"mat-checkbox",18),t._uU(47,"HIDROCARBUROS TOTALES (HTP) "),t.qZA(),t.qZA(),t.TgZ(48,"p"),t.TgZ(49,"mat-checkbox",19),t._uU(50,"HIDROCARBUROS AROM\xc1TICOS POLIC\xcdCLICOS"),t.qZA(),t.qZA(),t.TgZ(51,"p"),t.TgZ(52,"mat-checkbox",20),t._uU(53,"BENCENO, TOLUENO, ETILBENCENO & XILENO (BTEX) "),t.qZA(),t.qZA(),t.TgZ(54,"p"),t.TgZ(55,"mat-checkbox",21),t._uU(56,"COMPUESTOS ORG\xc1NICOS HALOGENADOS ADSORBIBLES (AOX) "),t.qZA(),t.qZA(),t.TgZ(57,"p"),t.TgZ(58,"mat-checkbox",22),t._uU(59,"FENOLES TOTALES"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(60,"mat-tab",23),t.TgZ(61,"div",24),t.TgZ(62,"div",25),t.TgZ(63,"div"),t.TgZ(64,"p"),t.TgZ(65,"mat-checkbox",26),t._uU(66,"ACIDEZ TOTAL"),t.qZA(),t.qZA(),t.TgZ(67,"p"),t.TgZ(68,"mat-checkbox",27),t.NdJ("change",function(n){return e.openAnalisisFisicoQuimico("alcalinidad","10",n.checked)}),t._uU(69,"ALCALINIDAD TOTAL"),t.qZA(),t.qZA(),t.TgZ(70,"p"),t.TgZ(71,"mat-checkbox",28),t._uU(72,"CLORUROS"),t.qZA(),t.qZA(),t.TgZ(73,"p"),t.TgZ(74,"mat-checkbox",29),t._uU(75,"DUREZA TOTAL"),t.qZA(),t.qZA(),t.TgZ(76,"p"),t.TgZ(77,"mat-checkbox",30),t._uU(78,"DUREZA C\xc1LCICA"),t.qZA(),t.qZA(),t.TgZ(79,"p"),t.TgZ(80,"mat-checkbox",31),t._uU(81,"FLUORUROS"),t.qZA(),t.qZA(),t.TgZ(82,"p"),t.TgZ(83,"mat-checkbox",32),t._uU(84,"SALINIDAD"),t.qZA(),t.qZA(),t.TgZ(85,"p"),t.TgZ(86,"mat-checkbox",33),t._uU(87,"S\xd3LIDOS TOTALES"),t.qZA(),t.qZA(),t.TgZ(88,"p"),t.TgZ(89,"mat-checkbox",34),t._uU(90,"S\xd3LIDOS DISUELTOS TOTALES"),t.qZA(),t.qZA(),t.TgZ(91,"p"),t.TgZ(92,"mat-checkbox",35),t._uU(93,"S\xd3LIDOS SEDIMENTABLES"),t.qZA(),t.qZA(),t.TgZ(94,"p"),t.TgZ(95,"mat-checkbox",36),t._uU(96,"POTENCIAL \xd3XIDO-REDUCCI\xd3N"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(97,"div"),t.TgZ(98,"p"),t.TgZ(99,"mat-checkbox",37),t._uU(100,"CLORO RESIDUAL LIBRE"),t.qZA(),t.qZA(),t.TgZ(101,"p"),t.TgZ(102,"mat-checkbox",38),t._uU(103,"MONOCLORAMINA"),t.qZA(),t.qZA(),t.TgZ(104,"p"),t.TgZ(105,"mat-checkbox",39),t._uU(106,"DICLORAMINA"),t.qZA(),t.qZA(),t.TgZ(107,"p"),t.TgZ(108,"mat-checkbox",40),t._uU(109,"TRICLORURO DE NITR\xd3GENO"),t.qZA(),t.qZA(),t.TgZ(110,"p"),t.TgZ(111,"mat-checkbox",41),t._uU(112,"NITR\xd3GENO TOTAL"),t.qZA(),t.qZA(),t.TgZ(113,"p"),t.TgZ(114,"mat-checkbox",42),t._uU(115,"NITR\xd3GENO ORG\xc1NICO"),t.qZA(),t.qZA(),t.TgZ(116,"p"),t.TgZ(117,"mat-checkbox",43),t._uU(118,"NITR\xd3GENO AMONIACAL"),t.qZA(),t.qZA(),t.TgZ(119,"p"),t.TgZ(120,"mat-checkbox",44),t._uU(121,"F\xd3SFORO TOTAL"),t.qZA(),t.qZA(),t.TgZ(122,"p"),t.TgZ(123,"mat-checkbox",45),t._uU(124,"F\xd3SFORO COMO ORTOFOSFATO"),t.qZA(),t.qZA(),t.TgZ(125,"p"),t.TgZ(126,"mat-checkbox",46),t._uU(127,"NITROGENOS COMO NITRATO"),t.qZA(),t.qZA(),t.TgZ(128,"p"),t.TgZ(129,"mat-checkbox",47),t._uU(130,"NITRATOS"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(131,"div"),t.TgZ(132,"p"),t.TgZ(133,"mat-checkbox",48),t._uU(134,"NITROGENOS COMO NITRITOS "),t.qZA(),t.qZA(),t.TgZ(135,"p"),t.TgZ(136,"mat-checkbox",49),t._uU(137,"NITRITOS"),t.qZA(),t.qZA(),t.TgZ(138,"p"),t.TgZ(139,"mat-checkbox",50),t._uU(140,"SULFATOS"),t.qZA(),t.qZA(),t.TgZ(141,"p"),t.TgZ(142,"mat-checkbox",51),t._uU(143,"SUSTANCIAS ACTIVAS AL AZUL DE METILENO "),t.qZA(),t.qZA(),t.TgZ(144,"p"),t.TgZ(145,"mat-checkbox",52),t._uU(146,"HIERRO POR M\xc9TODO DE FENANTROLINA "),t.qZA(),t.qZA(),t.TgZ(147,"p"),t.TgZ(148,"mat-checkbox",53),t._uU(149,"GRASAS Y ACEITE"),t.qZA(),t.qZA(),t.TgZ(150,"p"),t.TgZ(151,"mat-checkbox",54),t._uU(152,"OX\xcdGENO DISUELTO"),t.qZA(),t.qZA(),t.TgZ(153,"p"),t.TgZ(154,"mat-checkbox",55),t._uU(155,"DEMANDA QU\xcdMICA DE OX\xcdGENO"),t.qZA(),t.qZA(),t.TgZ(156,"p"),t.TgZ(157,"mat-checkbox",56),t._uU(158,"DEMANDA BIOQU\xcdMICA DE OX\xcdGENO "),t.qZA(),t.qZA(),t.TgZ(159,"p"),t.TgZ(160,"mat-checkbox",57),t._uU(161,"CIANURO TOTAL"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(162,"mat-tab",58),t.TgZ(163,"div",59),t.TgZ(164,"div",60),t.TgZ(165,"div"),t.TgZ(166,"p"),t.TgZ(167,"mat-checkbox",61),t._uU(168,"PLATA"),t.qZA(),t.qZA(),t.TgZ(169,"p"),t.TgZ(170,"mat-checkbox",62),t._uU(171,"ALUMINIO"),t.qZA(),t.qZA(),t.TgZ(172,"p"),t.TgZ(173,"mat-checkbox",63),t._uU(174,"ORO"),t.qZA(),t.qZA(),t.TgZ(175,"p"),t.TgZ(176,"mat-checkbox",64),t._uU(177,"BARIO"),t.qZA(),t.qZA(),t.TgZ(178,"p"),t.TgZ(179,"mat-checkbox",65),t._uU(180,"BERILIO"),t.qZA(),t.qZA(),t.TgZ(181,"p"),t.TgZ(182,"mat-checkbox",66),t._uU(183,"BISMUTO"),t.qZA(),t.qZA(),t.TgZ(184,"p"),t.TgZ(185,"mat-checkbox",67),t._uU(186,"CALCIO"),t.qZA(),t.qZA(),t.TgZ(187,"p"),t.TgZ(188,"mat-checkbox",68),t._uU(189,"CADMIO"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(190,"div"),t.TgZ(191,"p"),t.TgZ(192,"mat-checkbox",69),t._uU(193,"COBALTO"),t.qZA(),t.qZA(),t.TgZ(194,"p"),t.TgZ(195,"mat-checkbox",70),t._uU(196,"CROMO"),t.qZA(),t.qZA(),t.TgZ(197,"p"),t.TgZ(198,"mat-checkbox",71),t._uU(199,"CESIO"),t.qZA(),t.qZA(),t.TgZ(200,"p"),t.TgZ(201,"mat-checkbox",72),t._uU(202,"COBRE"),t.qZA(),t.qZA(),t.TgZ(203,"p"),t.TgZ(204,"mat-checkbox",73),t._uU(205,"HIERRO"),t.qZA(),t.qZA(),t.TgZ(206,"p"),t.TgZ(207,"mat-checkbox",74),t._uU(208,"IRIDIO"),t.qZA(),t.qZA(),t.TgZ(209,"p"),t.TgZ(210,"mat-checkbox",75),t._uU(211,"POTASIO"),t.qZA(),t.qZA(),t.TgZ(212,"p"),t.TgZ(213,"mat-checkbox",76),t._uU(214,"LITIO"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(215,"div"),t.TgZ(216,"p"),t.TgZ(217,"mat-checkbox",77),t._uU(218,"MAGNESIO"),t.qZA(),t.qZA(),t.TgZ(219,"p"),t.TgZ(220,"mat-checkbox",78),t._uU(221,"MANGANESO"),t.qZA(),t.qZA(),t.TgZ(222,"p"),t.TgZ(223,"mat-checkbox",79),t._uU(224,"MOLIBDENO"),t.qZA(),t.qZA(),t.TgZ(225,"p"),t.TgZ(226,"mat-checkbox",80),t._uU(227,"SODIO"),t.qZA(),t.qZA(),t.TgZ(228,"p"),t.TgZ(229,"mat-checkbox",81),t._uU(230,"NIQUEL"),t.qZA(),t.qZA(),t.TgZ(231,"p"),t.TgZ(232,"mat-checkbox",82),t._uU(233,"OSMIO"),t.qZA(),t.qZA(),t.TgZ(234,"p"),t.TgZ(235,"mat-checkbox",83),t._uU(236,"PLOMO"),t.qZA(),t.qZA(),t.TgZ(237,"p"),t.TgZ(238,"mat-checkbox",84),t._uU(239,"PLATINO"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(240,"div"),t.TgZ(241,"p"),t.TgZ(242,"mat-checkbox",85),t._uU(243,"ANTIMONIO"),t.qZA(),t.qZA(),t.TgZ(244,"p"),t.TgZ(245,"mat-checkbox",86),t._uU(246,"SILICIO"),t.qZA(),t.qZA(),t.TgZ(247,"p"),t.TgZ(248,"mat-checkbox",87),t._uU(249,"ESTA\xd1O"),t.qZA(),t.qZA(),t.TgZ(250,"p"),t.TgZ(251,"mat-checkbox",88),t._uU(252,"VANADIO"),t.qZA(),t.qZA(),t.TgZ(253,"p"),t.TgZ(254,"mat-checkbox",89),t._uU(255,"CINC"),t.qZA(),t.qZA(),t.TgZ(256,"p"),t.TgZ(257,"mat-checkbox",90),t._uU(258,"ARS\xc9NICO"),t.qZA(),t.qZA(),t.TgZ(259,"p"),t.TgZ(260,"mat-checkbox",91),t._uU(261,"MERCURIO"),t.qZA(),t.qZA(),t.TgZ(262,"div"),t.TgZ(263,"p"),t.TgZ(264,"mat-checkbox",47),t._uU(265,"NITRATOS"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(266,"mat-tab",92),t.TgZ(267,"div",93),t.TgZ(268,"div"),t.TgZ(269,"p"),t.TgZ(270,"mat-checkbox",94),t._uU(271,"COLIFORMES TOTALES"),t.qZA(),t.qZA(),t.TgZ(272,"p"),t.TgZ(273,"mat-checkbox",94),t._uU(274,"COLIFORMES FECALES"),t.qZA(),t.qZA(),t.TgZ(275,"p"),t.TgZ(276,"mat-checkbox",95),t._uU(277,"E-COLI"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(278,"table",96),t._UZ(279,"th"),t.TgZ(280,"tr",97),t.TgZ(281,"td",98),t.YNc(282,$t,2,1,"div",99),t.qZA(),t.TgZ(283,"td",100),t.YNc(284,jt,2,0,"button",101),t.YNc(285,Ht,2,0,"button",102),t.qZA(),t._UZ(286,"td",98),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&o&&(t.xp6(10),t.Q6J("formGroup",e.checkBoxs),t.xp6(272),t.Q6J("ngIf",34!=e.inData.cdestado),t.xp6(2),t.Q6J("ngIf",34==e.inData.cdestado||e.isEdit),t.xp6(1),t.Q6J("ngIf",35==e.inData.cdestado&&"ROLE_DIRECTOR"==e.rol&&!e.isEdit))},directives:[N.lW,c.ZT,L.gM,Q.Hw,r._Y,r.JL,r.sg,et.SP,et.uX,Yt.oG,r.JJ,r.u,A.O5],styles:[".mat-tab-group.mat-primary .mat-ink-bar, .mat-tab-nav-bar.mat-primary[_ngcontent-%COMP%]   .mat-ink-bar[_ngcontent-%COMP%]{background:#000000;height:3px}  .mat-tab-group.mat-background-accent>.mat-tab-header{background-color:#27c34a}.containerFather[_ngcontent-%COMP%]{margin:auto;width:max-content}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{text-align:center;color:#000}hr[_ngcontent-%COMP%]{margin-top:-10px;width:100%;height:3px;background-color:#000}.fisicoquimicos[_ngcontent-%COMP%], .metales[_ngcontent-%COMP%], .microbiologico[_ngcontent-%COMP%], .cromatografico[_ngcontent-%COMP%], .basicos[_ngcontent-%COMP%]{border:2px solid #27c34a;border-top:none;background-color:#fff;height:430px;align-items:center}.close[_ngcontent-%COMP%]{float:right}.mat-checkbox[_ngcontent-%COMP%]{font-weight:bold}.container[_ngcontent-%COMP%]{padding-top:1.5%;width:100%;margin:auto;align-items:center;justify-content:center}.boton[_ngcontent-%COMP%]{background-color:#27c34a;color:#fff}  .mat-checkbox-frame{border-color:#27c34a}@media only screen and (max-width: 768px){h1[_ngcontent-%COMP%]{margin-top:-10%}.container[_ngcontent-%COMP%]{padding-left:4%;width:98%}.check[_ngcontent-%COMP%]{justify-content:center;width:33%}.row[_ngcontent-%COMP%]{margin:auto;display:block;justify-content:space-between}.buttons[_ngcontent-%COMP%]{width:80%;padding-top:5%;padding-bottom:5%}a[_ngcontent-%COMP%]{width:40%}.continue[_ngcontent-%COMP%], .back[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center}.check[_ngcontent-%COMP%]{margin-bottom:3%}}"]}),(0,T.gn)([(0,f.bH)()],P.prototype,"blockUI",void 0);var zt=u(9457);let Gt=(()=>{class i{get isFileSaverSupported(){try{return!!new Blob}catch{return!1}}genType(e){if(!e||-1===e.lastIndexOf("."))return"text/plain";const a=e.substr(e.lastIndexOf(".")+1);switch(a){case"txt":return"text/plain";case"xml":case"html":return`text/${a}`;case"json":return"octet/stream";default:return`application/${a}`}}save(e,a,n,l){if(!e)throw new Error("Data argument should be a blob instance");const m=new Blob([e],{type:n||e.type||this.genType(a)});(0,zt.saveAs)(m,decodeURI(a||"download"),l)}saveText(e,a,n){const l=new Blob([e]);this.save(l,a,void 0,n)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var z=u(171);function Wt(i,o){if(1&i&&(t.TgZ(0,"mat-option",46),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.Q6J("value",e.nmdato),t.xp6(1),t.hij(" ",e.dsdato," ")}}function Xt(i,o){if(1&i&&(t.TgZ(0,"mat-option",46),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.Q6J("value",e.nmdato),t.xp6(1),t.hij(" ",e.dsdato," ")}}function Kt(i,o){if(1&i&&(t.TgZ(0,"mat-option",46),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.Q6J("value",e.nmdato),t.xp6(1),t.hij(" ",e.dsdato," ")}}function te(i,o){if(1&i&&(t.TgZ(0,"mat-option",46),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.Q6J("value",e.nmdato),t.xp6(1),t.hij(" ",e.dsdato," ")}}function ee(i,o){if(1&i&&(t.TgZ(0,"mat-option",46),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.Q6J("value",e.nmdato),t.xp6(1),t.hij(" ",e.dsdato," ")}}function oe(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"button",47),t.NdJ("click",function(){return t.CHM(e),t.oxw().openDialogAdd()}),t._uU(1," Agregar muestra "),t.qZA()}}function ie(i,o){1&i&&(t.TgZ(0,"th",48),t._uU(1," C\xd3DIGO "),t.qZA())}const C=function(i){return{"background-color":i}};function ae(i,o){if(1&i&&(t.TgZ(0,"td",49),t._uU(1),t.qZA()),2&i){const e=o.$implicit,a=t.oxw();t.Q6J("ngStyle",t.VKq(2,C,a.colors(e.cdestado))),t.xp6(1),t.Oqu(e.cdcodmuestra)}}function ne(i,o){1&i&&(t.TgZ(0,"th",48),t._uU(1," FECHA DE LA TOMA"),t.qZA())}function re(i,o){if(1&i&&(t.TgZ(0,"td",49),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=o.$implicit,a=t.oxw();t.Q6J("ngStyle",t.VKq(4,C,a.colors(e.cdestado))),t.xp6(1),t.Oqu(t.lcZ(2,2,e.dtfechatoma))}}function se(i,o){1&i&&(t.TgZ(0,"th",48),t._uU(1," TIPO DE MUESTRA "),t.qZA())}function ce(i,o){if(1&i&&(t.TgZ(0,"td",49),t._uU(1),t.qZA()),2&i){const e=o.$implicit,a=t.oxw();t.Q6J("ngStyle",t.VKq(2,C,a.colors(e.cdestado))),t.xp6(1),t.Oqu(e.dstipomuestra)}}function le(i,o){1&i&&(t.TgZ(0,"th",48),t._uU(1," PRESERVACI\xd3N "),t.qZA())}function ue(i,o){if(1&i&&(t.TgZ(0,"td",49),t._uU(1),t.qZA()),2&i){const e=o.$implicit,a=t.oxw();t.Q6J("ngStyle",t.VKq(2,C,a.colors(e.cdestado))),t.xp6(1),t.Oqu(e.dspreservacion)}}function de(i,o){1&i&&(t.TgZ(0,"th",48),t._uU(1," TIPO DE RECIPIENTE "),t.qZA())}function me(i,o){if(1&i&&(t.TgZ(0,"td",49),t._uU(1),t.qZA()),2&i){const e=o.$implicit,a=t.oxw();t.Q6J("ngStyle",t.VKq(2,C,a.colors(e.cdestado))),t.xp6(1),t.Oqu(e.dstiporecipiente)}}function pe(i,o){1&i&&(t.TgZ(0,"th",48),t._uU(1," PUNTO RECOLECCI\xd3N "),t.qZA())}function ge(i,o){if(1&i&&(t.TgZ(0,"td",49),t._uU(1),t.qZA()),2&i){const e=o.$implicit,a=t.oxw();t.Q6J("ngStyle",t.VKq(2,C,a.colors(e.cdestado))),t.xp6(1),t.Oqu(e.dspuntorecoleccion)}}function fe(i,o){1&i&&(t.TgZ(0,"th",48),t._uU(1," TOMADO POR "),t.qZA())}function he(i,o){if(1&i&&(t.TgZ(0,"td",49),t._uU(1),t.qZA()),2&i){const e=o.$implicit,a=t.oxw();t.Q6J("ngStyle",t.VKq(2,C,a.colors(e.cdestado))),t.xp6(1),t.Oqu(e.dstomadapor)}}function Ze(i,o){1&i&&(t.TgZ(0,"th",48),t._uU(1," CLIENTE "),t.qZA())}function Ae(i,o){if(1&i&&(t.TgZ(0,"td",49),t._uU(1),t.qZA()),2&i){const e=o.$implicit,a=t.oxw();t.Q6J("ngStyle",t.VKq(2,C,a.colors(e.cdestado))),t.xp6(1),t.Oqu(e.dscliente)}}function _e(i,o){1&i&&(t.TgZ(0,"th",50),t._uU(1," ACCIONES "),t.qZA())}function Te(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"button",56),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().updateMuestra(n)}),t.TgZ(1,"mat-icon"),t._uU(2,"edit"),t.qZA(),t.qZA()}}function be(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"button",57),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().deleteMuestra(n.cdunimuestra)}),t.TgZ(1,"mat-icon"),t._uU(2,"delete"),t.qZA(),t.qZA()}}function Ce(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"td",51),t.TgZ(1,"button",52),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw().openRadicacion(l)}),t.TgZ(2,"mat-icon"),t._uU(3,"query_stats"),t.qZA(),t.qZA(),t.YNc(4,Te,3,0,"button",53),t.YNc(5,be,3,0,"button",54),t.TgZ(6,"button",55),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw().generarReporteMuestra(l.cdunimuestra)}),t.TgZ(7,"mat-icon"),t._uU(8,"download"),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=o.$implicit,a=t.oxw();t.Q6J("ngStyle",t.VKq(3,C,a.colors(e.cdestado))),t.xp6(4),t.Q6J("ngIf",a.isDirector),t.xp6(1),t.Q6J("ngIf",a.isDirector)}}function qe(i,o){1&i&&t._UZ(0,"tr",58)}function ve(i,o){1&i&&t._UZ(0,"tr",59)}function ke(i,o){1&i&&(t.TgZ(0,"tr",60),t.TgZ(1,"td",61),t._uU(2,"Use los filtro de busqueda para consultar la muestra deseada"),t.qZA(),t.qZA())}const Ue=function(){return[5,10,20]};class D{constructor(o,e,a,n,l,m){this.dialog=o,this.sweeAlert=e,this.muestraService=a,this.fb=n,this.auth=l,this.fileSaverService=m,this.ListaTipoRecipiente=[],this.ListaTipoMuestra=[],this.ListaPreservacion=[],this.ListaTomadoPor=[],this.ListaEstados=[],this.eliminando=!1,this.isDirector=!1,this.ELEMENT_DATA=[],this.displayedColumns=["codigo","fechaToma","tipoMuestra","preservacion","tipoRecipiente","puntoRecoleccion","tomadoPor","cliente","detalles"],this.dataSource=new Z.by,this.formConsulta=this.fb.group({fedesdetoma:[""],fehastatoma:[""],cdcodmuestra:[""],cdtipomuestra:[""],cdtiporecipiente:[""],cdpreservacion:[""],cdtomadapor:[""],cdestado:[""],dstomadapor:[""]}),this.rol=l.getCurrentUser().roles[0].authority,this.isDirector="ROLE_DIRECTOR"==this.rol}ngOnInit(){this.listarMaestras()}listarMaestras(){this.blockUI.start("Cargando..."),this.muestraService.listaMaestra().subscribe(o=>{this.ListaTipoRecipiente=o.TIPO_RECIPIENTE,this.ListaTipoMuestra=o.TIPO_MUESTRA,this.ListaPreservacion=o.PRESERVACION,this.ListaTomadoPor=o.TOMADA_POR,this.ListaEstados=o.ESTADOS,this.blockUI.stop()},o=>{this.blockUI.stop(),s().fire("ERROR","Ha ocurrido un error al cargar los par\xe1metros de consulta","error")})}consultaByParameter(){var i,o=this;return(i=function*(){let e=o.formConsulta.get("fedesdetoma").value,a=o.formConsulta.get("fehastatoma").value;""!==e&&""!==a||""!==o.formConsulta.get("cdcodmuestra").value?e>a&&""===o.formConsulta.get("cdcodmuestra").value?o.sweeAlert.warning("La fecha inicial no puede ser mayor a la final",""):(o.blockUI.start("Cargando..."),o.muestraService.consultaByparameter(o.formConsulta.getRawValue()).subscribe(n=>{200==n.status?(0==n.data.length&&(o.eliminando||o.sweeAlert.info("No se encontraron registros con los par\xe1metros consultados",""),o.eliminando=!1),o.ELEMENT_DATA=n.data,console.log(o.ELEMENT_DATA),o.dataSource=new Z.by(o.ELEMENT_DATA),o.dataSource.paginator=o.paginator,o.blockUI.stop()):(s().fire("",`<b>${n.message}</b>`,"warning"),o.blockUI.stop())},n=>{o.blockUI.stop(),s().fire("ERROR",`Ha ocurrido un error al consultar ${n}`,"error")})):o.sweeAlert.warning("La fecha inicial y final son obligatorias si no se intenta buscar directamente por el c\xf3digo de la muestra","")},function(){var o=this,e=arguments;return new Promise(function(a,n){var l=i.apply(o,e);function m(h){S(l,a,n,m,g,"next",h)}function g(h){S(l,a,n,m,g,"throw",h)}m(void 0)})})()}openRadicacion(o){"ROLE_DIRECTOR"==this.rol||34!=o.cdestado?this.dialog.open(P,{data:o}).afterClosed().subscribe(()=>{this.consultaByParameter()}):this.sweeAlert.warning("<b>Esta muestra a\xfan no tiene par\xe1metros de an\xe1lisis asociados</b>","")}updateMuestra(o){"ROLE_DIRECTOR"==this.rol?this.dialog.open(M,{data:{muestra:o}}).afterClosed().subscribe(a=>{a&&this.consultaByParameter()}):this.sweeAlert.warning("<b>Usted no tiene permisos para ejecutar esta acci\xf3n</b>","")}deleteMuestra(o){"ROLE_DIRECTOR"==this.rol?this.sweeAlert.confirmacion("\xbfDeseas eliminar esta muestra?").then(e=>{e.isConfirmed?(this.blockUI.start("Eliminando..."),this.muestraService.deleteMuestra(o).subscribe(a=>{this.eliminando=!0,s().fire(a.message,"","success"),this.consultaByParameter(),this.blockUI.stop()},a=>{this.blockUI.stop(),s().fire("ERROR","Error al eliminar la muestra","error")})):e.isDenied&&s().fire("Cancelado","","info")}):this.sweeAlert.warning("<b>Usted no tiene permisos para ejecutar esta acci\xf3n</b>","")}openDialogAdd(){"ROLE_DIRECTOR"==this.rol?this.dialog.open(M).afterClosed().subscribe(e=>{e&&(this.formConsulta.get("cdcodmuestra").setValue(e.cdcodmuestra),this.consultaByParameter())}):this.sweeAlert.warning("<b>Quienes pueden agregar muestras son los directores t\xe9cnicos</b>","")}base64ToArrayBuffer(o){let e=window.atob(o),a=e.length,n=new Uint8Array(a);for(let l=0;l<a;l++){let m=e.charCodeAt(l);n[l]=m}return n}generarReporteMuestra(o){this.blockUI.start("Generando reporte..."),this.muestraService.generarReporteMuestra(o).subscribe(e=>{if(0==e.status){const a=this.base64ToArrayBuffer(e.data),n=new Blob([a],{type:"application/octet-stream"});this.fileSaverService.save(n,"Reporte de la muestra.pdf"),this.blockUI.stop()}else this.blockUI.stop(),s().fire("ERROR","Ha ocurrido un error","error")},e=>{this.blockUI.stop(),s().fire("ERROR","Fall\xf3 la generaci\xf3n del reporte","error")})}limpiarFiltros(){this.formConsulta.patchValue({fedesdetoma:"",fehastatoma:"",cdcodmuestra:"",cdtipomuestra:"",cdtiporecipiente:"",cdpreservacion:"",cdtomadapor:"",cdestado:"",dstomadapor:""})}colors(o){return 34==o?"#e2e8f0":39==o?"rgb(252 211 77 / 65%)":38==o?"#fca5a5":37==o?"#d9f99d":35==o?"rgb(252 211 77 / 65%)":void 0}}D.\u0275fac=function(o){return new(o||D)(t.Y36(c.uw),t.Y36(I.o),t.Y36(U),t.Y36(r.qu),t.Y36(F.e),t.Y36(Gt))},D.\u0275cmp=t.Xpm({type:D,selectors:[["app-muestras-sin-analisis"]],viewQuery:function(o,e){if(1&o&&t.Gf(B.NW,5),2&o){let a;t.iGM(a=t.CRH())&&(e.paginator=a.first)}},decls:113,vars:17,consts:[[1,"accordion"],[3,"formGroup"],["multi","",1,"headers-align"],[3,"expanded"],[1,"row"],["appearance","outline"],["matInput","","formControlName","fedesdetoma",3,"matDatepicker"],["matSuffix","",3,"for"],["pickerDesde",""],["matInput","","formControlName","fehastatoma",3,"matDatepicker"],["pickerHasta",""],["formControlName","cdtipomuestra"],[3,"value",4,"ngFor","ngForOf"],["formControlName","cdtomadapor"],[1,"rowI"],["matInput","","formControlName","cdcodmuestra"],["formControlName","cdestado"],["formControlName","cdtiporecipiente"],["formControlName","cdpreservacion"],["mat-raised-button","","color","warn","id","limpiar",3,"click"],["mat-raised-button","","type","submit","id","consultar",3,"click"],[1,"toolbar-container"],[2,"width","40%"],[2,"background-color","#e2e8f0","margin-right","2%","width","8%"],[2,"background-color","rgb(252 211 77 / 65%)","margin-right","2%"],[2,"background-color","#d9f99d","margin-right","2%"],["mat-raised-button","","class","addButton","matTooltip","Agregar muestra","matTooltipPosition","left",3,"click",4,"ngIf"],[1,"mat-elevation-z8"],["mat-table","","aria-describedby","Tabla que lista las muestras",3,"dataSource"],["matColumnDef","codigo"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",3,"ngStyle",4,"matCellDef"],["matColumnDef","fechaToma"],["matColumnDef","tipoMuestra"],["matColumnDef","preservacion"],["matColumnDef","tipoRecipiente"],["matColumnDef","puntoRecoleccion"],["matColumnDef","tomadoPor"],["matColumnDef","cliente"],["matColumnDef","detalles"],["mat-header-cell","","style","text-align: center;",4,"matHeaderCellDef"],["mat-cell","","style","text-align: center;",3,"ngStyle",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","",3,"pageSizeOptions"],[3,"value"],["mat-raised-button","","matTooltip","Agregar muestra","matTooltipPosition","left",1,"addButton",3,"click"],["mat-header-cell",""],["mat-cell","",3,"ngStyle"],["mat-header-cell","",2,"text-align","center"],["mat-cell","",2,"text-align","center",3,"ngStyle"],["mat-icon-button","","matTooltip","Radicaci\xf3n",3,"click"],["mat-icon-button","","matTooltip","Editar",3,"click",4,"ngIf"],["mat-icon-button","","matTooltip","Eliminar","color","warn",3,"click",4,"ngIf"],["mat-icon-button","","matTooltip","Descargar reporte","color","primary",3,"click"],["mat-icon-button","","matTooltip","Editar",3,"click"],["mat-icon-button","","matTooltip","Eliminar","color","warn",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(o,e){if(1&o&&(t.TgZ(0,"section"),t._UZ(1,"br"),t.TgZ(2,"div",0),t.TgZ(3,"form",1),t.TgZ(4,"mat-accordion",2),t.TgZ(5,"mat-expansion-panel",3),t.TgZ(6,"mat-expansion-panel-header"),t.TgZ(7,"mat-panel-title"),t.TgZ(8,"h2"),t._uU(9,"Par\xe1metros de consulta"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(10,"div"),t.TgZ(11,"div",4),t.TgZ(12,"mat-form-field",5),t.TgZ(13,"mat-label"),t._uU(14,"Fecha de la toma desde"),t.qZA(),t._UZ(15,"input",6),t._UZ(16,"mat-datepicker-toggle",7),t._UZ(17,"mat-datepicker",null,8),t.qZA(),t.TgZ(19,"mat-form-field",5),t.TgZ(20,"mat-label"),t._uU(21,"Fecha de la toma hasta"),t.qZA(),t._UZ(22,"input",9),t._UZ(23,"mat-datepicker-toggle",7),t._UZ(24,"mat-datepicker",null,10),t.qZA(),t.TgZ(26,"mat-form-field",5),t.TgZ(27,"mat-label"),t._uU(28,"Tipo de muestra"),t.qZA(),t.TgZ(29,"mat-select",11),t.TgZ(30,"mat-option"),t._uU(31,"Seleccionar"),t.qZA(),t.YNc(32,Wt,2,2,"mat-option",12),t.qZA(),t.qZA(),t.TgZ(33,"mat-form-field",5),t.TgZ(34,"mat-label"),t._uU(35,"Tomador por"),t.qZA(),t.TgZ(36,"mat-select",13),t.TgZ(37,"mat-option"),t._uU(38,"Seleccionar"),t.qZA(),t.YNc(39,Xt,2,2,"mat-option",12),t.qZA(),t.qZA(),t.qZA(),t.TgZ(40,"div",14),t.TgZ(41,"mat-form-field",5),t.TgZ(42,"mat-label"),t._uU(43,"C\xf3digo de la muestra"),t.qZA(),t._UZ(44,"input",15),t.qZA(),t.TgZ(45,"mat-form-field",5),t.TgZ(46,"mat-label"),t._uU(47,"Estado de la muestra"),t.qZA(),t.TgZ(48,"mat-select",16),t.TgZ(49,"mat-option"),t._uU(50,"Seleccionar"),t.qZA(),t.YNc(51,Kt,2,2,"mat-option",12),t.qZA(),t.qZA(),t.TgZ(52,"mat-form-field",5),t.TgZ(53,"mat-label"),t._uU(54,"Tipo de recipiente"),t.qZA(),t.TgZ(55,"mat-select",17),t.TgZ(56,"mat-option"),t._uU(57,"Seleccionar"),t.qZA(),t.YNc(58,te,2,2,"mat-option",12),t.qZA(),t.qZA(),t.TgZ(59,"mat-form-field",5),t.TgZ(60,"mat-label"),t._uU(61,"Preservaci\xf3n"),t.qZA(),t.TgZ(62,"mat-select",18),t.TgZ(63,"mat-option"),t._uU(64,"Seleccionar"),t.qZA(),t.YNc(65,ee,2,2,"mat-option",12),t.qZA(),t.qZA(),t.TgZ(66,"button",19),t.NdJ("click",function(){return e.limpiarFiltros()}),t._uU(67,"Limpiar"),t.qZA(),t.TgZ(68,"button",20),t.NdJ("click",function(){return e.consultaByParameter()}),t._uU(69,"Consultar"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(70,"div",21),t.TgZ(71,"header"),t.TgZ(72,"div",22),t.TgZ(73,"span",23),t._uU(74,"Pendiente por radicar"),t.qZA(),t.TgZ(75,"span",24),t._uU(76,"En custodia"),t.qZA(),t.TgZ(77,"span",25),t._uU(78,"Terminada"),t.qZA(),t.qZA(),t.YNc(79,oe,2,0,"button",26),t.qZA(),t.TgZ(80,"div",27),t.TgZ(81,"table",28),t.ynx(82,29),t.YNc(83,ie,2,0,"th",30),t.YNc(84,ae,2,4,"td",31),t.BQk(),t.ynx(85,32),t.YNc(86,ne,2,0,"th",30),t.YNc(87,re,3,6,"td",31),t.BQk(),t.ynx(88,33),t.YNc(89,se,2,0,"th",30),t.YNc(90,ce,2,4,"td",31),t.BQk(),t.ynx(91,34),t.YNc(92,le,2,0,"th",30),t.YNc(93,ue,2,4,"td",31),t.BQk(),t.ynx(94,35),t.YNc(95,de,2,0,"th",30),t.YNc(96,me,2,4,"td",31),t.BQk(),t.ynx(97,36),t.YNc(98,pe,2,0,"th",30),t.YNc(99,ge,2,4,"td",31),t.BQk(),t.ynx(100,37),t.YNc(101,fe,2,0,"th",30),t.YNc(102,he,2,4,"td",31),t.BQk(),t.ynx(103,38),t.YNc(104,Ze,2,0,"th",30),t.YNc(105,Ae,2,4,"td",31),t.BQk(),t.ynx(106,39),t.YNc(107,_e,2,0,"th",40),t.YNc(108,Ce,9,5,"td",41),t.BQk(),t.YNc(109,qe,1,0,"tr",42),t.YNc(110,ve,1,0,"tr",43),t.YNc(111,ke,3,0,"tr",44),t.qZA(),t._UZ(112,"mat-paginator",45),t.qZA(),t.qZA(),t.qZA()),2&o){const a=t.MAs(18),n=t.MAs(25);t.xp6(3),t.Q6J("formGroup",e.formConsulta),t.xp6(2),t.Q6J("expanded",!0),t.xp6(10),t.Q6J("matDatepicker",a),t.xp6(1),t.Q6J("for",a),t.xp6(6),t.Q6J("matDatepicker",n),t.xp6(1),t.Q6J("for",n),t.xp6(9),t.Q6J("ngForOf",e.ListaTipoMuestra),t.xp6(7),t.Q6J("ngForOf",e.ListaTomadoPor),t.xp6(12),t.Q6J("ngForOf",e.ListaEstados),t.xp6(7),t.Q6J("ngForOf",e.ListaTipoRecipiente),t.xp6(7),t.Q6J("ngForOf",e.ListaPreservacion),t.xp6(14),t.Q6J("ngIf",e.isDirector),t.xp6(2),t.Q6J("dataSource",e.dataSource),t.xp6(28),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(16,Ue))}},directives:[r._Y,r.JL,r.sg,z.pp,z.ib,z.yz,z.yK,_.KE,_.hX,J.Nt,r.Fj,b.hl,r.JJ,r.u,b.nW,_.R9,b.Mq,Y.gD,V.ey,A.sg,N.lW,A.O5,Z.BZ,Z.w1,Z.fO,Z.Dz,Z.as,Z.nj,Z.Ee,B.NW,L.gM,Z.ge,Z.ev,A.PC,Q.Hw,Z.XQ,Z.Gk],pipes:[A.uU],styles:[".mat-form-field-flex>.mat-form-field-infix{padding:.4em 0!important}  .mat-form-field-label-wrapper{top:-1.5em}  .mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{transform:translateY(-1.1em) scale(.75);width:133.33333%}.row[_ngcontent-%COMP%], .rowI[_ngcontent-%COMP%]{display:flex;margin:0 auto;justify-content:space-between}.row[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:23%}.rowI[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%], #consultar[_ngcontent-%COMP%]{width:18%}.accordion[_ngcontent-%COMP%]{width:97%;margin:auto}th.mat-header-cell[_ngcontent-%COMP%]{background-color:#0e314f}.mat-header-cell[_ngcontent-%COMP%]{color:#fff}header[_ngcontent-%COMP%]{padding:2% 24px 16px;margin:auto;display:flex;justify-content:space-between;align-items:center}.mat-elevation-z8[_ngcontent-%COMP%]{margin:auto;width:97%}table[_ngcontent-%COMP%]{width:100%}.addButton[_ngcontent-%COMP%]{width:15%;background-color:#27c34a;color:#fff;height:min-content}#consultar[_ngcontent-%COMP%]{width:7.5%;background-color:#27c34a;color:#fff;height:min-content}#limpiar[_ngcontent-%COMP%]{width:7.5%;height:min-content}"]}),(0,T.gn)([(0,f.bH)()],D.prototype,"blockUI",void 0);const Oe=[{path:"",component:q.M,children:[{path:"",component:D}]}];let Me=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[w.Bz.forChild(Oe)],w.Bz]}),i})(),xe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[A.ez,Me,y.q,f.uh.forRoot()]]}),i})()}}]);