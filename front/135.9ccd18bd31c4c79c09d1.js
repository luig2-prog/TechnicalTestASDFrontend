"use strict";(self.webpackChunkpro_grado=self.webpackChunkpro_grado||[]).push([[135],{9135:(J,c,i)=>{i.r(c),i.d(c,{LoginModule:()=>E});var p=i(8583),n=i(3679),f=i(7686),m=i(4655),h=i(4762),x=i(8259),_=i.n(x),w=i(4741),e=i(7716);const d="authToken",u="authUserName",s="authAutorities";let b=(()=>{class r{constructor(){this.roles=[]}setToken(t){window.sessionStorage.removeItem(d),window.sessionStorage.setItem(d,t)}getToken(){return sessionStorage.getItem(d)}setUserName(t){window.sessionStorage.removeItem(u),window.sessionStorage.setItem(u,t)}getUserName(){return sessionStorage.getItem(u)}setAuthorities(t){window.sessionStorage.removeItem(s),window.sessionStorage.setItem(s,JSON.stringify(t))}getAuthorities(){return this.roles=[],sessionStorage.getItem(s)&&JSON.parse(sessionStorage.getItem(s)||"{}").array.forEach(t=>{this.roles.push(t.authority)}),this.roles}loguot(){window.sessionStorage.clear()}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var y=i(2823),v=i(3147),k=i(8295);function C(r,o){1&r&&(e.TgZ(0,"div"),e._uU(1," Solo se permiten 100 caracteres "),e.qZA())}function Z(r,o){1&r&&(e.TgZ(0,"div"),e._uU(1," Este campo es requerido "),e.qZA())}function T(r,o){if(1&r&&(e.TgZ(0,"mat-error"),e.YNc(1,C,2,0,"div",11),e.YNc(2,Z,2,0,"div",11),e.qZA()),2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.getValue("nombreUsuario").errors?null:t.getValue("nombreUsuario").errors.maxlength),e.xp6(1),e.Q6J("ngIf",null==t.getValue("nombreUsuario").errors?null:t.getValue("nombreUsuario").errors.required)}}function M(r,o){1&r&&(e.TgZ(0,"div"),e._uU(1," Solo se permiten 100 caracteres "),e.qZA())}function O(r,o){1&r&&(e.TgZ(0,"div"),e._uU(1," Este campo es requerido "),e.qZA())}function P(r,o){if(1&r&&(e.TgZ(0,"mat-error"),e.YNc(1,M,2,0,"div",11),e.YNc(2,O,2,0,"div",11),e.qZA()),2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.getValue("password").errors?null:t.getValue("password").errors.maxlength),e.xp6(1),e.Q6J("ngIf",null==t.getValue("password").errors?null:t.getValue("password").errors.required)}}function U(r,o){if(1&r){const t=e.EpF();e.TgZ(0,"form",8),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw().onLogin()}),e.TgZ(1,"div"),e.TgZ(2,"label",9),e._uU(3,"Usermame"),e.qZA(),e._UZ(4,"input",10),e.YNc(5,T,3,2,"mat-error",11),e.qZA(),e.TgZ(6,"div"),e.TgZ(7,"label",12),e._uU(8,"Password"),e.qZA(),e._UZ(9,"input",13),e.YNc(10,P,3,2,"mat-error",11),e.qZA(),e.TgZ(11,"div",14),e.TgZ(12,"a",15),e.NdJ("click",function(){return e.CHM(t),e.oxw().forgoutPassword()}),e._uU(13," \xbfOlvidaste tu contrase\xf1a? "),e.qZA(),e.qZA(),e.TgZ(14,"button",16),e._uU(15," Iniciar sesi\xf3n "),e.qZA(),e.qZA()}if(2&r){const t=e.oxw();e.Q6J("formGroup",t.formLogin),e.xp6(5),e.Q6J("ngIf",t.getValue("nombreUsuario").errors&&(t.getValue("nombreUsuario").touched||t.getValue("nombreUsuario").dirty)),e.xp6(5),e.Q6J("ngIf",t.getValue("password").errors&&(t.getValue("password").touched||t.getValue("password").dirty)),e.xp6(4),e.Q6J("disabled",t.formLogin.invalid)}}function L(r,o){1&r&&(e.TgZ(0,"div"),e._uU(1," Solo se permiten 100 caracteres "),e.qZA())}function A(r,o){1&r&&(e.TgZ(0,"div"),e._uU(1," Este campo es requerido "),e.qZA())}function I(r,o){if(1&r&&(e.TgZ(0,"mat-error"),e.YNc(1,L,2,0,"div",11),e.YNc(2,A,2,0,"div",11),e.qZA()),2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.getValueEmail("email").errors?null:t.getValueEmail("email").errors.maxlength),e.xp6(1),e.Q6J("ngIf",null==t.getValueEmail("email").errors?null:t.getValueEmail("email").errors.required)}}function S(r,o){if(1&r){const t=e.EpF();e.TgZ(0,"form",8),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw().sendMailUser()}),e.TgZ(1,"div"),e._UZ(2,"input",17),e.YNc(3,I,3,2,"mat-error",11),e.qZA(),e.TgZ(4,"button",16),e._uU(5," Enviar "),e.qZA(),e.qZA()}if(2&r){const t=e.oxw();e.Q6J("formGroup",t.formForgoutPassword),e.xp6(3),e.Q6J("ngIf",t.getValueEmail("email").errors&&(t.getValueEmail("email").touched||t.getValueEmail("email").dirty)),e.xp6(1),e.Q6J("disabled",t.formForgoutPassword.invalid)}}class a{constructor(o,t,g,l){this.tokenService=o,this.authService=t,this.router=g,this.sweetAlert=l,this.title="Login",this.isLogged=!1,this.isLoginFail=!1,this.nombreUsuario="",this.password="",this.roles=[],this.forgoutPasswordshow=!1,this.formLogin=new n.cw({nombreUsuario:new n.NI("",n.kI.required),password:new n.NI("")}),this.formForgoutPassword=new n.cw({email:new n.NI("",n.kI.required)})}ngOnInit(){const o=localStorage.getItem("token");null!=o&&(this.authService.setCurrentUser(o,!1),this.router.navigate(["/home"]))}getValue(o){return this.formLogin.get(o)}getValueEmail(o){return this.formForgoutPassword.get(o)}generateObject(){return{usernameOrEmail:this.formLogin.get("nombreUsuario")?.value,password:this.formLogin.get("password")?.value}}onLogin(){this.authService.login(this.generateObject()).subscribe(o=>{200===o.status?(this.blockUI.start("Cargando..."),this.isLogged=!0,this.isLoginFail=!1,this.authService.setCurrentUser(o.data.tokenDeAcceso,o.data.redirectToSetPassowrd),this.tokenService.setToken(o.data.tokenDeAcceso),this.router.navigate(["/home"]),this.blockUI.stop()):this.sweetAlert.warning(o.message,"Login")},o=>{this.isLogged=!1,this.isLoginFail=!0,_().fire("ERROR",o.error.message,"warning"),this.blockUI.stop()})}forgoutPassword(){this.forgoutPasswordshow=!0,this.title="Recuperar contrase\xf1a"}sendMailUser(){}}a.\u0275fac=function(o){return new(o||a)(e.Y36(b),e.Y36(y.e),e.Y36(m.F0),e.Y36(v.o))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-login"]],decls:10,vars:3,consts:[[1,"bg-gray-50","dark:bg-gray-900"],[1,"flex","flex-col","items-center","justify-center","px-6","py-8","mx-auto","md:h-screen","lg:py-0"],["href","#/login",1,"flex","items-center","mb-6","text-2xl","font-semibold","text-gray-900","dark:text-white"],["src","../../../../assets/image/asd_logo.png","alt","logo",1,"logo-unicor-login"],[1,"w-full","bg-white","rounded-lg","shadow","dark:border","md:mt-0","sm:max-w-md","xl:p-0","dark:bg-gray-800","dark:border-gray-700"],[1,"p-6","space-y-4","md:space-y-6","sm:p-8"],[1,"text-xl","font-bold","leading-tight","tracking-tight","text-gray-900","md:text-2xl","dark:text-white"],["class","space-y-4 md:space-y-6",3,"formGroup","ngSubmit",4,"ngIf"],[1,"space-y-4","md:space-y-6",3,"formGroup","ngSubmit"],["for","email",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["formControlName","nombreUsuario","required","","type","email","name","email","id","email","placeholder","username",1,"bg-gray-50","border","border-gray-300","text-gray-900","sm:text-sm","rounded-lg","focus:ring-primary-600","focus:border-primary-600","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],[4,"ngIf"],["for","password",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["formControlName","password","type","password","name","password","id","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","sm:text-sm","rounded-lg","focus:ring-primary-600","focus:border-primary-600","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],[1,"flex","items-center","justify-between"],["href","#",1,"text-sm","font-medium","text-primary-600","hover:underline","dark:text-primary-500",3,"click"],["type","submit",1,"w-full","text-white","bg-primary-600","hover:bg-primary-700","focus:ring-4","focus:outline-none","focus:ring-primary-300","font-medium","rounded-lg","text-sm","px-5","py-2.5","text-center","dark:bg-primary-600","dark:hover:bg-primary-700","dark:focus:ring-primary-800",3,"disabled"],["formControlName","email","required","","type","email","name","email","id","email","placeholder","Email",1,"bg-gray-50","border","border-gray-300","text-gray-900","sm:text-sm","rounded-lg","focus:ring-primary-600","focus:border-primary-600","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"]],template:function(o,t){1&o&&(e.TgZ(0,"section",0),e.TgZ(1,"div",1),e.TgZ(2,"a",2),e._UZ(3,"img",3),e.qZA(),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e.TgZ(6,"h1",6),e._uU(7),e.qZA(),e.YNc(8,U,16,4,"form",7),e.YNc(9,S,6,3,"form",7),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.xp6(7),e.hij(" ",t.title," "),e.xp6(1),e.Q6J("ngIf",!t.forgoutPasswordshow),e.xp6(1),e.Q6J("ngIf",t.forgoutPasswordshow))},directives:[p.O5,n._Y,n.JL,n.sg,n.Fj,n.JJ,n.u,n.Q7,k.TO],styles:['.container[_ngcontent-%COMP%]{margin:auto;width:30%}.full-witdh[_ngcontent-%COMP%]{width:100%}.logo-unicor-login[_ngcontent-%COMP%]{width:100%;height:9rem}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{margin:0;min-height:100vh;background:#e2e2e2}.app-header[_ngcontent-%COMP%]{justify-content:space-between;position:fixed;top:0;left:0;right:0;z-index:2;box-shadow:0 3px 5px -1px #0003,0 6px 10px #00000024,0 1px 18px #0000001f}.login-wrapper[_ngcontent-%COMP%]{height:100%}.positronx[_ngcontent-%COMP%]{text-decoration:none;color:#fff}.box[_ngcontent-%COMP%]{position:relative;top:0;opacity:1;float:left;padding:60px 50px 40px;width:100%;background:#fff;border-radius:10px;transform:scale(1);-webkit-transform:scale(1);-ms-transform:scale(1);z-index:5;max-width:330px}.box.back[_ngcontent-%COMP%]{transform:scale(.95);-webkit-transform:scale(.95);-ms-transform:scale(.95);top:-20px;opacity:.8;z-index:-1}.box[_ngcontent-%COMP%]:before{content:"";width:100%;height:30px;border-radius:10px;position:absolute;top:-10px;background:rgba(255,255,255,.6);left:0;transform:scale(.95);-webkit-transform:scale(.95);-ms-transform:scale(.95);z-index:-1}.login-wrapper[_ngcontent-%COMP%]   .example-form[_ngcontent-%COMP%]{min-width:100%;max-width:300px;width:100%}.login-wrapper[_ngcontent-%COMP%]   .example-full-width[_ngcontent-%COMP%], .login-wrapper[_ngcontent-%COMP%]   .btn-block[_ngcontent-%COMP%]{width:100%}.login-wrapper[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{text-align:center;width:100%;display:block;font-weight:700}.login-wrapper[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:30px;margin:0}.login-wrapper[_ngcontent-%COMP%]   .mat-card[_ngcontent-%COMP%]{padding:40px 70px 50px}.login-wrapper[_ngcontent-%COMP%]   .mat-stroked-button[_ngcontent-%COMP%]{border:1px solid currentColor;line-height:54px;background:#FFF7FA}.login-wrapper[_ngcontent-%COMP%]   .mat-form-field-appearance-legacy[_ngcontent-%COMP%]   .mat-form-field-infix[_ngcontent-%COMP%]{padding:.8375em 0}']}),(0,h.gn)([(0,w.bH)()],a.prototype,"blockUI",void 0);const N=[{path:"",component:a}];let q=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[m.Bz.forChild(N)],m.Bz]}),r})(),E=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[p.ez,f.q,n.UX,q]]}),r})()}}]);